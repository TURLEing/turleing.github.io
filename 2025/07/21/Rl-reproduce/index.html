<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="å¤©æ³½é¾Ÿçš„é¾Ÿå£³å±‹">
  <link 
    rel="icon" 
    href="https://i.loli.net/2021/07/16/yKghkEQWcY34rOU.jpg">
  <title>RL å®éªŒå¤ç°éšç¬”</title>
  
    
      <meta 
        property="og:title" 
        content="RL å®éªŒå¤ç°éšç¬”">
    
    
      <meta 
        property="og:url" 
        content="https://tzturtle.moe/2025/07/21/Rl-reproduce/index.html">
    
    
      <meta 
        property="og:img" 
        content="https://i.loli.net/2021/07/16/yKghkEQWcY34rOU.jpg">
    
    
      <meta 
        property="og:img" 
        content="&lt;p&gt;ä¸€äº›åœ¨å¤ç°å¼ºåŒ–å­¦ä¹ ç›¸å…³è®ºæ–‡æ—¶æ‘©æ“¦äº§ç”Ÿçš„ idea .&lt;/p&gt;">
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2025-07-21">
      <meta 
        property="og:article:modified_time" 
        content="2025-07-30">
      <meta 
        property="og:article:author" 
        content="å¤©æ³½é¾Ÿ">
      
        
          <meta 
            property="og:article:tag" 
            content="å¼ºåŒ–å­¦ä¹ ">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" as="script">
  
  
    
    <link rel="prefetch" href="//unpkg.com/valine/dist/Valine.min.js" as="script">
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img" 
          src="https://i.loli.net/2021/07/16/yKghkEQWcY34rOU.jpg" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">å¤©æ³½é¾Ÿçš„é¾Ÿå£³å±‹</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/" 
        class="navbar-menu-item">
        
          é¦–é¡µ
        
      </a>
    
      <a 
        href="/archives" 
        class="navbar-menu-item">
        
          å½’æ¡£
        
      </a>
    
      <a 
        href="/tags" 
        class="navbar-menu-item">
        
          æ ‡ç­¾
        
      </a>
    
      <a 
        href="/categories" 
        class="navbar-menu-item">
        
          åˆ†ç±»
        
      </a>
    
      <a 
        href="/about" 
        class="navbar-menu-item">
        
          å…³äº
        
      </a>
    
      <a 
        href="/links" 
        class="navbar-menu-item">
        
          å‹é“¾
        
      </a>
    
      <a 
        href="/bangumis" 
        class="navbar-menu-item">
        
          ç•ªå‰§
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      RL å®éªŒå¤ç°éšç¬”
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2025-07-21T07:32:49.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2025-07-21</span>
    </time>
    
      <span class="dot"></span>
      
        <a 
          href="/categories/%E7%A7%91%E7%A0%94%E5%AD%A6%E4%B9%A0/" 
          class="post-meta-link">
          ç§‘ç ”å­¦ä¹ 
        </a>
      
    
    
      <span class="dot"></span>
      <span>6.8k å­—</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/tags/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" 
            class="post-meta-link">
            å¼ºåŒ–å­¦ä¹ 
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <p>ä¸€äº›åœ¨å¤ç°å¼ºåŒ–å­¦ä¹ ç›¸å…³è®ºæ–‡æ—¶æ‘©æ“¦äº§ç”Ÿçš„ idea .</p>
<span id="more"></span>
<h2 id="limr-æ ¸å¿ƒæ€æƒ³"><a class="markdownIt-Anchor" href="#limr-æ ¸å¿ƒæ€æƒ³"></a> LIMR æ ¸å¿ƒæ€æƒ³</h2>
<h3 id="limrçš„æ ¸å¿ƒæ€æƒ³ä¸è®­ç»ƒæµç¨‹"><a class="markdownIt-Anchor" href="#limrçš„æ ¸å¿ƒæ€æƒ³ä¸è®­ç»ƒæµç¨‹"></a> LIMRçš„æ ¸å¿ƒæ€æƒ³ä¸è®­ç»ƒæµç¨‹</h3>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>: LIMRï¼ˆLess is More for RL Scalingï¼‰çš„æ ¸å¿ƒè®ºç‚¹æ˜¯ï¼Œåœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œè®­ç»ƒæ•°æ®çš„<strong>è´¨é‡è¿œæ¯”æ•°é‡é‡è¦</strong>ã€‚é€šè¿‡å…¶æå‡ºçš„â€œå­¦ä¹ å½±å“æµ‹é‡â€ï¼ˆLIMï¼‰æ–¹æ³•ï¼Œä»8,523ä¸ªé—®é¢˜çš„å®Œæ•´æ•°æ®é›†ä¸­ç­›é€‰å‡ºä»…1,389ä¸ªé«˜ä»·å€¼æ ·æœ¬ï¼Œä¾¿èƒ½è¾¾åˆ°ç”šè‡³è¶…è¿‡ä½¿ç”¨å®Œæ•´æ•°æ®é›†çš„è®­ç»ƒæ•ˆæœã€‚</li>
<li><strong>è®­ç»ƒæµç¨‹</strong>:
<ol>
<li><strong>æ•°æ®ç­›é€‰ (LIM)</strong>: é¦–å…ˆé€šè¿‡åˆæ­¥è®­ç»ƒï¼Œè¿½è¸ªæ¯ä¸ªæ ·æœ¬çš„å¥–åŠ±å˜åŒ–ï¼Œå¹¶è®¡ç®—å…¶ä¸â€œå¹³å‡å¥–åŠ±æ›²çº¿â€çš„å¯¹é½åˆ†æ•° ã€‚æ ¹æ®ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¦‚ <code>Î¸=0.6</code>ï¼‰ç­›é€‰å‡ºé«˜åˆ†æ•°çš„æ ·æœ¬ï¼Œç»„æˆLIMRæ•°æ®é›† 4ã€‚</li>
<li><strong>å¼ºåŒ–å­¦ä¹  (RL)</strong>: ä½¿ç”¨ç­›é€‰å‡ºçš„LIMRæ•°æ®é›†ï¼Œé€šè¿‡PPOç®—æ³•å¯¹<code>Qwen2.5-Math-7B</code>åŸºç¡€æ¨¡å‹è¿›è¡Œå…¨å‚æ•°å¾®è°ƒã€‚</li>
</ol>
</li>
</ul>
<h3 id="ppoç®—æ³•ä¸criticçš„ä½œç”¨"><a class="markdownIt-Anchor" href="#ppoç®—æ³•ä¸criticçš„ä½œç”¨"></a> PPOç®—æ³•ä¸Criticçš„ä½œç”¨</h3>
<ul>
<li><strong>PPOè®­ç»ƒè®¾ç½®</strong>:
<ul>
<li><strong>æ¡†æ¶</strong>: OpenRLHF 6ã€‚</li>
<li><strong>æ¢ç´¢é˜¶æ®µ</strong>: <code>rollout batch size</code>ä¸º1,024ï¼Œæ¯ä¸ªæç¤ºç”Ÿæˆ8ä¸ªå¤šæ ·æ€§æ ·æœ¬ï¼ˆ<code>temperature=1.2</code>ï¼‰ 7ã€‚</li>
<li><strong>è®­ç»ƒé˜¶æ®µ</strong>: <code>batch size</code>ä¸º256ï¼ŒActorå­¦ä¹ ç‡<code>5e-7</code>ï¼ŒCriticå­¦ä¹ ç‡<code>9e-6</code>ï¼ŒKLç³»æ•°<code>0.01</code> 8ã€‚</li>
</ul>
</li>
<li><strong>ä¸ºä½•éœ€è¦Critic</strong>: Criticé€šè¿‡å­¦ä¹ ä¸€ä¸ªçŠ¶æ€çš„<strong>æœŸæœ›å€¼ <code>V(s)</code></strong>ï¼Œæä¾›äº†ä¸€ä¸ªç¨³å®šçš„â€œåŸºçº¿â€ã€‚å®ƒå¸®åŠ©å°†åŸå§‹å¥–åŠ±ä¿¡å·è½¬åŒ–ä¸ºæ›´æœ‰æ•ˆçš„<strong>ä¼˜åŠ¿ä¿¡å· <code>A</code></strong>ï¼ˆ<code>A â‰ˆ å®é™…å¥–åŠ± - æœŸæœ›å€¼</code>ï¼‰ï¼Œè§£å†³äº†é«˜æ–¹å·®é—®é¢˜ã€‚åŒæ—¶ï¼Œå®ƒåœ¨æ¯ä¸€æ­¥éƒ½æä¾›ä»·å€¼é¢„æµ‹ï¼Œä¸ºè§£å†³å¥–åŠ±ç¨€ç–é—®é¢˜æä¾›äº†ç¨ å¯†çš„å­¦ä¹ ä¿¡å·å’Œâ€œè¿œè§â€ã€‚</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆè¦è€ƒå¯Ÿå“åº”é•¿åº¦"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¦è€ƒå¯Ÿå“åº”é•¿åº¦"></a> ä¸ºä»€ä¹ˆè¦è€ƒå¯Ÿå“åº”é•¿åº¦</h3>
<ul>
<li><strong>è¯Šæ–­å·¥å…·</strong>: åœ¨LIMRçš„è®­ç»ƒä¸­ï¼Œå“åº”é•¿åº¦è¢«ç”¨ä½œä¸€ä¸ªè¯Šæ–­å·¥å…·ï¼Œä»¥è¡¡é‡<strong>æ¨ç†æ•ˆç‡</strong>å’Œ<strong>è®­ç»ƒç¨³å®šæ€§</strong>ã€‚</li>
<li><strong>æ›²çº¿åˆ†æ</strong>: è®ºæ–‡ä¸­çš„å›¾3(b)æ˜¾ç¤º 9ï¼š
<ul>
<li>ä½¿ç”¨<strong>å®Œæ•´æ•°æ®é›†</strong>è®­ç»ƒæ—¶ï¼Œå“åº”é•¿åº¦æ›²çº¿<strong>ä¸ç¨³å®š</strong>ï¼Œæš—ç¤ºæ¨¡å‹çš„æ¨ç†ç­–ç•¥æ··ä¹±ã€‚</li>
<li>ä½¿ç”¨<strong>LIMRæ•°æ®é›†</strong>è®­ç»ƒæ—¶ï¼Œæ›²çº¿å‘ˆç°â€œ<strong>å…ˆä¸‹é™åå¹³ç¨³ä¸Šå‡</strong>â€çš„è¶‹åŠ¿ï¼Œè¿™è¢«è§£è¯»ä¸ºæ¨¡å‹å…ˆå­¦ä¹ åˆ°â€œç®€æ´é«˜æ•ˆâ€ï¼Œä¹‹åéšç€èƒ½åŠ›å¢å¼ºï¼Œèƒ½ç¨³å®šåœ°è¿›è¡Œæ›´é•¿ã€æ›´å¤æ‚çš„æ¨ç†ã€‚</li>
</ul>
</li>
</ul>
<h3 id="é™„å¦‚ä½•æ·±åº¦å¤ç°ä¸å­¦ä¹ "><a class="markdownIt-Anchor" href="#é™„å¦‚ä½•æ·±åº¦å¤ç°ä¸å­¦ä¹ "></a> é™„ï¼šå¦‚ä½•æ·±åº¦å¤ç°ä¸å­¦ä¹ </h3>
<p>å½“è¢«è€å¸ˆè¦æ±‚å¤ç°æ­¤å·¥ä½œæ—¶ï¼Œä»…ä»…è·‘é€šè„šæœ¬æ˜¯ä¸å¤Ÿçš„ã€‚ä¸ºäº†çœŸæ­£åœ°å­¦ä¹ ï¼Œå»ºè®®é‡‡å–ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ·±åº¦ç†è§£</strong>: å‰–æä»£ç ï¼Œå°†è®ºæ–‡ä¸­çš„å…¬å¼ã€è¶…å‚æ•°å’Œæ ¸å¿ƒé€»è¾‘ï¼ˆå¦‚LIMæ‰“åˆ†ã€PPOå¾ªç¯ï¼‰ä¸ä»£ç å®ç°ä¸€ä¸€å¯¹åº”ã€‚</li>
<li><strong>å®éªŒä¸éªŒè¯</strong>:
<ul>
<li>äº²æ‰‹å¤ç°è®ºæ–‡ä¸­çš„â€œå¤±è´¥â€æ¡ˆä¾‹ï¼Œæ¯”å¦‚ä½¿ç”¨**éšæœºæ•°æ®é›†ï¼ˆRANDï¼‰**è¿›è¡Œè®­ç»ƒï¼ŒéªŒè¯å…¶æ•ˆæœç¡®å®æ›´å·®ã€‚</li>
<li>è¿›è¡Œ<strong>æ¶ˆèç ”ç©¶</strong>ï¼Œä¾‹å¦‚è°ƒæ•´LIMçš„ç­›é€‰é˜ˆå€¼<code>Î¸</code>æˆ–ä¿®æ”¹å¥–åŠ±å‡½æ•°ï¼Œè§‚å¯Ÿå…¶å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“ã€‚</li>
</ul>
</li>
<li><strong>æ¢ç´¢ä¸åˆ›æ–°</strong>: å°†LIMæ–¹æ³•åº”ç”¨åˆ°æ–°çš„æ•°æ®é›†æˆ–æ¨¡å‹ä¸Šï¼Œæµ‹è¯•å…¶æ³›åŒ–èƒ½åŠ›ï¼Œæˆ–è€…å°è¯•å¯¹LIMæ–¹æ³•æœ¬èº«è¿›è¡Œæ”¹è¿›ã€‚</li>
<li><strong>æ€»ç»“ä¸æ²‰æ·€</strong>: å°†æ‰€æœ‰ç†è§£ã€å®éªŒå’Œå‘ç°æ•´ç†æˆä¸€ä»½è¯¦å°½çš„å¤ç°æŠ¥å‘Šï¼Œå°†çŸ¥è¯†ä½“ç³»åŒ–ã€‚</li>
</ol>
<hr />
<h2 id="ppo-è®­ç»ƒæµç¨‹ä»¥-openrlhf-ä¸ºä¾‹"><a class="markdownIt-Anchor" href="#ppo-è®­ç»ƒæµç¨‹ä»¥-openrlhf-ä¸ºä¾‹"></a> PPO è®­ç»ƒæµç¨‹ï¼ˆä»¥ OpenRLHF ä¸ºä¾‹ï¼‰</h2>
<p>è¿™äº›æ—¥å¿—æ¸…æ™°åœ°å±•ç¤ºäº† PPO ç®—æ³•ç”¨äºå¯¹é½å¤§è¯­è¨€æ¨¡å‹çš„ä¸¤ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š<strong>ç»éªŒæ”¶é›† (Experience Generation / Rollout)</strong> å’Œ <strong>æ¨¡å‹ä¼˜åŒ– (Model Optimization)</strong>ã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œä¸æ–­é‡å¤è¿™ä¸¤ä¸ªé˜¶æ®µæ¥è¿­ä»£æå‡æ¨¡å‹è¡¨ç°ã€‚</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>J</mi><mrow><mi>P</mi><mi>P</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><mi>q</mi><mo>âˆ¼</mo><mi>P</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>o</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><msub><mi>Î¸</mi><mrow><mi>a</mi><mi>d</mi><mi>d</mi></mrow></msub></msub><mo stretchy="false">(</mo><mi>O</mi><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mfrac><mn>1</mn><mrow><mi mathvariant="normal">âˆ£</mi><mi>o</mi><mi mathvariant="normal">âˆ£</mi></mrow></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi mathvariant="normal">âˆ£</mi><mi>o</mi><mi mathvariant="normal">âˆ£</mi></mrow></munderover><mi>min</mi><mo>â¡</mo><mrow><mo fence="true">[</mo><mfrac><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo separator="true">,</mo><msub><mi>o</mi><mrow><mo>&lt;</mo><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></mrow><mrow><msub><mi>Ï€</mi><msub><mi>Î¸</mi><mrow><mi>o</mi><mi>d</mi><mi>d</mi></mrow></msub></msub><mo stretchy="false">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo separator="true">,</mo><msub><mi>o</mi><mrow><mo>&lt;</mo><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mfrac><msub><mi>A</mi><mi>t</mi></msub><mo separator="true">,</mo><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">p</mi></mrow><mrow><mo fence="true">(</mo><mfrac><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo separator="true">,</mo><msub><mi>o</mi><mrow><mo>&lt;</mo><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></mrow><mrow><msub><mi>Ï€</mi><msub><mi>Î¸</mi><mrow><mi>o</mi><mi>d</mi><mi>d</mi></mrow></msub></msub><mo stretchy="false">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo separator="true">,</mo><msub><mi>o</mi><mrow><mo>&lt;</mo><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mfrac><mo separator="true">,</mo><mn>1</mn><mo>âˆ’</mo><mi>Îµ</mi><mo separator="true">,</mo><mn>1</mn><mo>+</mo><mi>Îµ</mi><mo fence="true">)</mo></mrow><msub><mi>A</mi><mi>t</mi></msub><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">J_{PPO}(\theta)=\mathbb{E}[q\sim P(Q),o\sim\pi_{\theta_{add}}(O|q)]\frac{1}{|o|}\sum_{t=1}^{|o|}\min\left[\frac{\pi_\theta(o_t|q,o_{&lt;t})}{\pi_{\theta_{odd}}(o_t|q,o_{&lt;t})}A_t,\mathrm{clip}\left(\frac{\pi_\theta(o_t|q,o_{&lt;t})}{\pi_{\theta_{odd}}(o_t|q,o_{&lt;t})},1-\varepsilon,1+\varepsilon\right)A_t\right]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbb">E</span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">Q</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.2281180000000003em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999985em;"><span style="top:-2.55em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25586em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mclose">]</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ£</span><span class="mord mathdefault">o</span><span class="mord">âˆ£</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9610050000000003em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.386005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight">o</span><span class="mord mtight">âˆ£</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">min</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999985em;"><span style="top:-2.55em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25586em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">&lt;</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17737em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">&lt;</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17737em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.94186em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathrm">c</span><span class="mord mathrm">l</span><span class="mord mathrm">i</span><span class="mord mathrm">p</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999985em;"><span style="top:-2.55em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.25586em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">&lt;</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17737em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">&lt;</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17737em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.94186em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">Îµ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">Îµ</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<h3 id="é˜¶æ®µä¸€ç»éªŒæ”¶é›†-rollout-phase"><a class="markdownIt-Anchor" href="#é˜¶æ®µä¸€ç»éªŒæ”¶é›†-rollout-phase"></a> é˜¶æ®µä¸€ï¼šç»éªŒæ”¶é›† (Rollout Phase) ğŸ“</h3>
<p>è¿™æ˜¯ PPO è®­ç»ƒçš„ç¬¬ä¸€æ­¥ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œç³»ç»Ÿä½¿ç”¨å½“å‰çš„ <strong>ç­–ç•¥æ¨¡å‹ (Old Policy Model)</strong> æ¥é’ˆå¯¹ä¸€æ‰¹è¾“å…¥çš„æç¤º (Prompts) ç”Ÿæˆå›å¤ã€‚</p>
<p><strong>æ—¥å¿—åˆ†æ:</strong></p>
<ol>
<li>
<p><strong>åŠ è½½æ•°æ® (Adding requests):</strong></p>
<p>ä»£ç æ®µ</p>
<pre class="highlight"><code class="hljs plaintext">(LLMRayActor pid=106270) <br>Adding requests: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 4096/4096 [00:00&lt;00:00, 7268.82it/s]<br></code></pre>
<ul>
<li><strong>å«ä¹‰</strong>: ç³»ç»Ÿæ­£åœ¨åŠ è½½ç”¨äºç”Ÿæˆå›å¤çš„ promptsã€‚è¿™é‡Œçš„ <code>LLMRayActor</code> æ˜¯ä¸€ä¸ªå¹¶è¡Œçš„å·¥ä½œå•å…ƒï¼ˆActorï¼‰ï¼Œ<code>pid=106270</code> æ˜¯å®ƒçš„è¿›ç¨‹IDã€‚</li>
<li><strong>ä¾‹å­</strong>: æ—¥å¿—æ˜¾ç¤ºï¼Œè¿™ä¸ª Actor åŠ è½½äº† <code>4096</code> ä¸ª promptsã€‚OpenRLHF ä½¿ç”¨ Ray æ¡†æ¶è¿›è¡Œåˆ†å¸ƒå¼è®­ç»ƒï¼Œæ‰€ä»¥ä½ å¯èƒ½ä¼šçœ‹åˆ°å¤šä¸ª <code>LLMRayActor</code> åŒæ—¶åœ¨å·¥ä½œï¼ˆå¦‚ <code>pid=106272</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆå›å¤ (Processed prompts):</strong></p>
<p>ä»£ç æ®µ</p>
<pre class="highlight"><code class="hljs plaintext">(LLMRayActor pid=106270) <br>Processed prompts: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 4096/4096 [06:09&lt;00:00,  2.88it/s, est. speed input: 1273.07 toks/s, output: 12289.95 toks/s]<br></code></pre>
<ul>
<li><strong>å«ä¹‰</strong>: ç­–ç•¥æ¨¡å‹ (Policy Model) æ­£åœ¨å¯¹åŠ è½½çš„ 4096 ä¸ª prompts ç”Ÿæˆå›å¤ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶çš„æ­¥éª¤ã€‚</li>
<li><strong>ä¾‹å­</strong>: è¿™ä¸ªè¿‡ç¨‹èŠ±è´¹äº† <code>06:09</code>ï¼ˆ6åˆ†9ç§’ï¼‰ã€‚æ—¥å¿—è¿˜æä¾›äº†ç”Ÿæˆé€Ÿåº¦ <code>output: 12289.95 toks/s</code>ï¼ˆæ¯ç§’ç”Ÿæˆçº¦12kä¸ª tokenï¼‰ï¼Œè¿™è¡¨æ˜äº†æ¨¡å‹çš„æ¨ç†æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®Œæˆä¸€è½®æ”¶é›†:</strong></p>
<p>ä»£ç æ®µ</p>
<pre class="highlight"><code class="hljs plaintext">(PPOTrainer pid=113377) <br>Episode [1/10000]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [06:17&lt;00:00, 377.16s/it]<br>(PPOTrainer pid=785634) INFO ... ğŸš€ Starting experience making with 8192 samples<br></code></pre>
<ul>
<li><strong>å«ä¹‰</strong>: è¿™æ ‡å¿—ç€ä¸€è½®å®Œæ•´çš„ç»éªŒæ”¶é›†ï¼ˆä¸€ä¸ª Episodeï¼‰å·²ç»å®Œæˆã€‚</li>
<li><strong>ä¾‹å­</strong>: ç³»ç»Ÿæ€»å…±æ”¶é›†äº† <code>8192</code> ä¸ªæ ·æœ¬ï¼ˆ<code>4096 * 2</code> ä¸ªå¹¶è¡Œ Actorï¼‰ã€‚ç°åœ¨ï¼Œå®ƒå‡†å¤‡ç”¨è¿™äº›æ–°é²œå‡ºç‚‰çš„ â€œç»éªŒâ€ æ•°æ®æ¥è®­ç»ƒæ¨¡å‹ã€‚</li>
</ul>
</li>
</ol>
<hr />
<h3 id="é˜¶æ®µäºŒè®¡ç®—ä¼˜åŠ¿ä¸æ•°æ®å¤„ç†-advantage-calculation"><a class="markdownIt-Anchor" href="#é˜¶æ®µäºŒè®¡ç®—ä¼˜åŠ¿ä¸æ•°æ®å¤„ç†-advantage-calculation"></a> é˜¶æ®µäºŒï¼šè®¡ç®—ä¼˜åŠ¿ä¸æ•°æ®å¤„ç† (Advantage Calculation) ğŸ“Š</h3>
<p>åœ¨æ”¶é›†å®Œ &lt;prompt, response&gt; æ•°æ®å¯¹ä¹‹åï¼Œç³»ç»Ÿéœ€è¦è¯„ä¼°è¿™äº› response çš„å¥½åï¼ˆåŒ…æ‹¬å›ç­”æœ¬èº«çš„ rewardï¼Œä»¥åŠ critic model ç»™çš„è¯„åˆ†ï¼‰ï¼Œå¹¶ä¸ºåç»­çš„ä¼˜åŒ–åšå‡†å¤‡ã€‚</p>
<p><strong>æ—¥å¿—åˆ†æ:</strong></p>
<p>ä»£ç æ®µ</p>
<pre class="highlight"><code class="hljs plaintext">(PolicyModelActor pid=106271) forward: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1024/1024 [03:44&lt;00:00,  4.57it/s]<br>(CriticModelActor pid=108638) forward: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1024/1024 [03:25&lt;00:00,  4.99it/s]<br>(ReferenceModelActor pid=106942) forward: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1024/1024 [03:40&lt;00:00,  4.65it/s]<br>(PPOTrainer pid=785634) INFO ... âœ¨ Experience making completed in 0:07:31<br></code></pre>
<ul>
<li>
<p><strong>å«ä¹‰</strong>: è¿™ä¸€æ­¥æ¶‰åŠä¸‰ä¸ªæ¨¡å‹çš„<strong>å‰å‘ä¼ æ’­ (forward pass)</strong>ï¼Œç›®çš„æ˜¯è®¡ç®—åç»­ä¼˜åŒ–æ‰€éœ€çš„å…³é”®æŒ‡æ ‡ï¼š</p>
<ol>
<li><strong><code>PolicyModelActor</code> (ç­–ç•¥æ¨¡å‹)</strong>: è®¡ç®—åˆšæ‰ç”Ÿæˆçš„ response ä¸­æ¯ä¸ª token çš„æ¦‚ç‡ï¼ˆlog-probabilitiesï¼‰ã€‚</li>
<li><strong><code>CriticModelActor</code> (ä»·å€¼/è¯„è®ºå®¶æ¨¡å‹)</strong>: è¯„ä¼°ç”Ÿæˆçš„ response ä¸­æ¯ä¸ª token çš„<strong>ä»·å€¼ (Value)</strong>ã€‚è¿™ä¸ªä»·å€¼ä»£è¡¨äº†ä»å½“å‰çŠ¶æ€ï¼ˆtokenï¼‰å‡ºå‘ï¼Œæœªæ¥èƒ½è·å¾—å¤šå¤§æ€»å¥–åŠ±çš„æœŸæœ›ã€‚</li>
<li><strong><code>ReferenceModelActor</code> (å‚è€ƒæ¨¡å‹)</strong>: é€šå¸¸æ˜¯ä¸€ä¸ªæœªç» PPO è®­ç»ƒçš„ SFT æ¨¡å‹ã€‚å®ƒä¹Ÿè®¡ç®— response ä¸­æ¯ä¸ª token çš„æ¦‚ç‡ï¼Œç”¨äºåç»­è®¡ç®— <strong>KL æ•£åº¦ (KL Divergence)</strong>ã€‚KL æ•£åº¦æ˜¯ä¸€ä¸ªæƒ©ç½šé¡¹ï¼Œç”¨äºé˜²æ­¢ç­–ç•¥æ¨¡å‹åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­â€œèµ°ç«å…¥é­”â€ï¼Œä¸åŸå§‹çš„ã€å®‰å…¨çš„æ¨¡å‹åç¦»å¤ªè¿œã€‚</li>
</ol>
<p>PPO çš„æ ¸å¿ƒæ›´æ–°å…¬å¼ä¾èµ–äºä¸€ä¸ªéå¸¸é‡è¦çš„æ¯”ç‡ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo separator="true">,</mo><msub><mi>o</mi><mrow><mo>&lt;</mo><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></mrow><mrow><msub><mi>Ï€</mi><msub><mi>Î¸</mi><mrow><mi>o</mi><mi>d</mi><mi>d</mi></mrow></msub></msub><mo stretchy="false">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo separator="true">,</mo><msub><mi>o</mi><mrow><mo>&lt;</mo><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\pi_\theta(o_t|q,o_{&lt;t})}{\pi_{\theta_{odd}}(o_t|q,o_{&lt;t})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.6356799999999998em;vertical-align:-0.6256799999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.3487714285714287em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.02778em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.34963999999999995em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4009714285714285em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.3569999999999998em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mrel mtight">&lt;</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17092857142857143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">âˆ£</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.3569999999999998em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mrel mtight">&lt;</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.17092857142857143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.6256799999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> ï¼Œä½† Reference Model å’Œè¿™é‡Œçš„ Old Model æ˜¯ä¸¤å›äº‹ã€‚ç®€å•æ¥è®² Reference Model æ˜¯åœ¨ä¸€ä¸ª Step å†…å®Œæˆçš„ã€‚å³ PPO é‡Œçš„é‡è¦æ€§é‡‡æ ·ã€‚è™½ç„¶æ¨¡å‹åœ¨ â€œç»éªŒæ”¶é›†â€ é˜¶æ®µå·²ç»ç”Ÿæˆäº†è¿™äº› responseï¼Œä½†å½“æ—¶æˆ‘ä»¬åªå…³å¿ƒç”Ÿæˆäº†<em>å“ªä¸ª</em> tokenï¼Œå¹¶æ²¡æœ‰æŠŠæ¯ä¸ª token çš„<em>ç”Ÿæˆæ¦‚ç‡</em>éƒ½ç²¾ç¡®åœ°è®°å½•ä¸‹æ¥å¹¶å‚¨å­˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸“é—¨çš„æ­¥éª¤æ¥å®Œæˆè¿™ä»¶äº‹ã€‚</p>
<h4 id="policy-model-forward-åˆ°åº•åœ¨åšä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#policy-model-forward-åˆ°åº•åœ¨åšä»€ä¹ˆ"></a> â€œPolicy model forwardâ€ åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</h4>
<ol>
<li><strong>è¾“å…¥ (Input)</strong>: å°†â€œç»éªŒæ”¶é›†â€é˜¶æ®µäº§ç”Ÿçš„æ‰€æœ‰æ•°æ®å¯¹ <code>(prompt, response)</code> ä½œä¸ºè¾“å…¥ã€‚å¯¹äºæ¨¡å‹æ¥è¯´ï¼Œå°±æ˜¯å°† <code>prompt</code> å’Œ <code>response</code> çš„ token åºåˆ—æ‹¼æ¥èµ·æ¥ã€‚</li>
<li><strong>è®¡ç®— (Computation)</strong>: æ¨¡å‹å¯¹è¿™ä¸ªæ‹¼æ¥åçš„åºåˆ—è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„å‰å‘ä¼ æ’­ (forward pass)ã€‚</li>
<li><strong>è¾“å‡º (Output)</strong>: è¿™æ¬¡ forward çš„æ ¸å¿ƒç›®æ ‡ä¸æ˜¯ç”Ÿæˆæ–°çš„æ–‡æœ¬ï¼Œè€Œæ˜¯è®¡ç®—å‡ºåœ¨ <code>response</code> éƒ¨åˆ†ï¼Œ<strong>æ¯ä¸€ä¸ª token åœ¨å½“æ—¶è¢«ç”Ÿæˆæ—¶çš„å¯¹æ•°æ¦‚ç‡ (log-probabilities)</strong>ã€‚è¿™ä¸ªå¯¹æ•°æ¦‚ç‡å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ log(Ï€Î¸_old(aâˆ£s))ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¾‹å­</strong>: æ—¥å¿—æ˜¾ç¤ºï¼Œè¿™ä¸‰ä¸ªæ¨¡å‹åˆ†åˆ«å¯¹æ•°æ®è¿›è¡Œäº†å‰å‘è®¡ç®—ã€‚æ•´ä¸ªæ•°æ®é¢„å¤„ç†å’Œè®¡ç®—è¿‡ç¨‹è€—æ—¶ <code>0:07:31</code>ã€‚è‡³æ­¤ï¼Œæ‰€æœ‰ç”¨äºä¼˜åŒ–çš„æ•°æ®ï¼ˆç»éªŒï¼‰éƒ½å·²å‡†å¤‡å°±ç»ªã€‚</p>
</li>
</ul>
<hr />
<h3 id="é˜¶æ®µä¸‰æ¨¡å‹ä¼˜åŒ–-optimization-phase"><a class="markdownIt-Anchor" href="#é˜¶æ®µä¸‰æ¨¡å‹ä¼˜åŒ–-optimization-phase"></a> é˜¶æ®µä¸‰ï¼šæ¨¡å‹ä¼˜åŒ– (Optimization Phase) ğŸ§ </h3>
<p>è¿™æ˜¯ PPO ç®—æ³•çš„æ ¸å¿ƒã€‚ç³»ç»Ÿåˆ©ç”¨ä¸Šä¸€æ­¥è®¡ç®—å¥½çš„æ•°æ®ï¼ˆç‰¹åˆ«æ˜¯å¥–åŠ±ã€ä»·å€¼å’Œ KL æ•£åº¦ï¼‰ï¼Œé€šè¿‡åå‘ä¼ æ’­æ¥æ›´æ–°**ç­–ç•¥æ¨¡å‹ (Policy Model)<strong>å’Œ</strong>ä»·å€¼æ¨¡å‹ (Critic Model)**çš„å‚æ•°ã€‚</p>
<p><strong>æ—¥å¿—åˆ†æ:</strong></p>
<pre class="highlight"><code class="hljs plaintext">(PolicyModelActor pid=778441) <br>Train epoch [1/1]:   3%|â–| 26/1024 [00:35&lt;... act_loss=0.186, reward=-0.188, kl=0, ... ]<br>(CriticModelActor pid=782178) <br>Train epoch [1/1]:   2%|â–| 17/1024 [00:24&lt;... critic_loss=0.39, values=-0.0112, ... ]<br></code></pre>
<ul>
<li><strong>å«ä¹‰</strong>: ç³»ç»Ÿæ­£åœ¨åˆ†æ‰¹æ¬¡ï¼ˆmini-batchï¼‰åœ°å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚æ—¥å¿—æ˜¾ç¤ºäº†ä¸¤ä¸ªå¹¶è¡Œçš„è®­ç»ƒè¿‡ç¨‹ï¼š
<ul>
<li><strong>ç­–ç•¥æ¨¡å‹æ›´æ–° (<code>PolicyModelActor</code>)</strong>:
<ul>
<li><code>act_loss</code> (Actor Loss): è¿™æ˜¯ PPO çš„æ ¸å¿ƒæŸå¤±å‡½æ•°ã€‚å®ƒçš„ç›®æ ‡æ˜¯<strong>æœ€å¤§åŒ–</strong>é‚£äº›å¸¦æ¥é«˜â€œä¼˜åŠ¿â€ï¼ˆAdvantageï¼Œå³å®é™…å¥–åŠ±æ¯”é¢„æœŸä»·å€¼é«˜ï¼‰çš„ action (token) çš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œè¿™ä¸ª loss é€šå¸¸æ˜¯è´Ÿæ•°ï¼Œæˆ–è€…åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­å‘è´Ÿå€¼æ–¹å‘ç§»åŠ¨ã€‚</li>
<li><code>reward</code>: ä»å¥–åŠ±æ¨¡å‹ï¼ˆæˆ–è€…è§„åˆ™ï¼‰ä¸­è·å¾—çš„å¹³å‡å¥–åŠ±ã€‚è¿™ä¸ªåˆ†æ•°è¶Šé«˜ï¼Œè¯´æ˜ç”Ÿæˆçš„å›å¤è¶Šç¬¦åˆäººç±»åå¥½ã€‚</li>
<li><code>kl</code>: ç­–ç•¥æ¨¡å‹ä¸å‚è€ƒæ¨¡å‹ä¹‹é—´çš„ KL æ•£åº¦ï¼Œä½œä¸ºæ­£åˆ™åŒ–é¡¹ï¼Œé˜²æ­¢ç­–ç•¥åç¦»è¿‡è¿œã€‚</li>
</ul>
</li>
<li><strong>ä»·å€¼æ¨¡å‹æ›´æ–° (<code>CriticModelActor</code>)</strong>:
<ul>
<li><code>critic_loss</code> (Critic Loss): é€šå¸¸æ˜¯å‡æ–¹è¯¯å·®æŸå¤±ã€‚å®ƒè¡¡é‡äº†ä»·å€¼æ¨¡å‹é¢„æµ‹çš„ <code>values</code> ä¸å®é™…å›æŠ¥ï¼ˆ discounted rewards-to-goï¼‰ä¹‹é—´çš„å·®è·ã€‚è¿™ä¸ª loss è¶Šå°ï¼Œè¯´æ˜ä»·å€¼æ¨¡å‹å¯¹æœªæ¥å¥–åŠ±çš„é¢„æµ‹è¶Šå‡†ã€‚</li>
<li><code>values</code>: ä»·å€¼æ¨¡å‹å¯¹å½“å‰æ‰¹æ¬¡æ•°æ®é¢„æµ‹çš„å¹³å‡ä»·å€¼ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>ä¾‹å­</strong>:
<ul>
<li>åœ¨ <code>PolicyModelActor</code> çš„æ—¥å¿—ä¸­ï¼Œ<code>reward=-0.188</code> è¡¨ç¤ºå½“å‰æ‰¹æ¬¡çš„ç”Ÿæˆå†…å®¹è·å¾—çš„å¥–åŠ±æ˜¯è´Ÿçš„ï¼Œ<code>act_loss=0.186</code> æ˜¯ç­–ç•¥æŸå¤±ã€‚æ¨¡å‹ä¼šè°ƒæ•´å‚æ•°ï¼Œè¯•å›¾è®© <code>reward</code> å˜é«˜ï¼Œè®© <code>act_loss</code> å˜å°ï¼ˆæˆ–æ›´è´Ÿï¼‰ã€‚</li>
<li>åœ¨ <code>CriticModelActor</code> çš„æ—¥å¿—ä¸­ï¼Œ<code>critic_loss=0.39</code>ã€‚æ¨¡å‹ä¼šè°ƒæ•´å‚æ•°ï¼Œè®©è¿™ä¸ªæŸå¤±å€¼ä¸æ–­ä¸‹é™ã€‚</li>
</ul>
</li>
</ul>
<h3 id="è®­ç»ƒå¾ªç¯"><a class="markdownIt-Anchor" href="#è®­ç»ƒå¾ªç¯"></a> è®­ç»ƒå¾ªç¯ ğŸ”</h3>
<p>æ•´ä¸ªæµç¨‹å¯ä»¥æ€»ç»“ä¸ºä¸€ä¸ªå¾ªç¯ï¼š</p>
<ol>
<li><strong>Rollout</strong>: ç”¨å½“å‰ç­–ç•¥æ¨¡å‹ pi_theta ç”Ÿæˆä¸€æ‰¹ç»éªŒæ•°æ® $ D = {(s, a, r, sâ€™)} $ã€‚</li>
<li><strong>Calculate</strong>: å¯¹æ•°æ® D è®¡ç®—ä¼˜åŠ¿ A(s,a) å’Œä»·å€¼ $ V(s) $ã€‚</li>
<li><strong>Optimize</strong>: ä½¿ç”¨è¿™æ‰¹æ•°æ® $ D $ï¼Œé€šè¿‡æ¢¯åº¦ä¸‹é™åŒæ—¶ä¼˜åŒ–ç­–ç•¥æ¨¡å‹ pi_theta å’Œä»·å€¼æ¨¡å‹ $ V_{\phi} $ã€‚</li>
<li><strong>Repeat</strong>: å›åˆ°ç¬¬ 1 æ­¥ï¼Œä½¿ç”¨æ›´æ–°åçš„ç­–ç•¥æ¨¡å‹ pi_theta_new å¼€å§‹æ–°ä¸€è½®çš„ç»éªŒæ”¶é›†ã€‚</li>
</ol>
<p><img src="image-20250724151842025.png" alt="image-20250724151842025" / srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="image-20250724151842025.png" class="lozad post-image"></p>
<hr />
<h2 id="torlæ¡†æ¶æ ¸å¿ƒæ€æƒ³"><a class="markdownIt-Anchor" href="#torlæ¡†æ¶æ ¸å¿ƒæ€æƒ³"></a> TORLæ¡†æ¶æ ¸å¿ƒæ€æƒ³</h2>
<p><strong>TORL (Tool-Integrated Reinforcement Learning)</strong> æ˜¯ä¸€ç§æ–°é¢–çš„æ¡†æ¶ï¼Œæ—¨åœ¨é€šè¿‡<strong>å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰</strong>ï¼Œç›´æ¥åœ¨<strong>åŸºç¡€è¯­è¨€æ¨¡å‹</strong>ä¸Šè®­ç»ƒå…¶è‡ªä¸»ä½¿ç”¨ä»£ç è§£é‡Šå™¨ç­‰å¤–éƒ¨å·¥å…·çš„èƒ½åŠ›ï¼Œä»¥è§£å†³å¤æ‚çš„æ•°å­¦é—®é¢˜ã€‚å®ƒçš„æ ¸åˆ›æ–°åœ¨äºï¼Œä¸åŒäºä¾èµ–â€œç›‘ç£å¾®è°ƒâ€ï¼ˆSFTï¼‰è®©æ¨¡å‹æ¨¡ä»¿å›ºå®šçš„å·¥å…·ä½¿ç”¨æ¨¡å¼ï¼ŒTORLé€šè¿‡å¥–åŠ±é©±åŠ¨çš„<strong>è‡ªç”±æ¢ç´¢</strong>ï¼Œè®©æ¨¡å‹è‡ªå·±å‘ç°æœ€é«˜æ•ˆã€æœ€åˆç†çš„å·¥å…·ä½¿ç”¨ç­–ç•¥ 2222ã€‚</p>
<h3 id="torlå·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#torlå·¥ä½œæµç¨‹"></a> TORLå·¥ä½œæµç¨‹</h3>
<p>TORLçš„æµç¨‹æ˜¯ä¸€ä¸ªå°†<strong>æ¨ç†ã€ç¼–ç ã€æ‰§è¡Œã€åé¦ˆ</strong>èä¸ºä¸€ä½“çš„è‡ªåŠ¨åŒ–å¾ªç¯ 3333ï¼š</p>
<ol>
<li>
<p><strong>å¯åŠ¨ä¸ç”Ÿæˆ</strong>ï¼šæ¨¡å‹æ¥æ”¶é—®é¢˜åï¼Œå¼€å§‹ç”Ÿæˆæ··åˆäº†è‡ªç„¶è¯­è¨€æ¨ç†å’Œä»£ç å—çš„è§£å†³æ–¹æ¡ˆ 4ã€‚</p>
</li>
<li>
<p><strong>æš‚åœä¸è°ƒç”¨</strong>ï¼šå½“æ¨¡å‹ç”Ÿæˆä¸€ä¸ªç‰¹æ®Šçš„ä»£ç ç»“æŸæ ‡å¿—æ—¶ï¼Œç³»ç»Ÿä¼šæš‚åœæ–‡æœ¬ç”Ÿæˆï¼Œå¹¶è‡ªåŠ¨æå–æœ€æ–°çš„ä»£ç å— 55ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œä¸åé¦ˆ</strong>ï¼šä»£ç è¢«å‘é€åˆ°éš”ç¦»çš„<strong>ä»£ç è§£é‡Šå™¨</strong>ï¼ˆå¦‚Sandbox Fusionï¼‰ä¸­æ‰§è¡Œ 6ã€‚æ‰§è¡Œç»“æœï¼Œæ— è®ºæ˜¯æˆåŠŸè¾“å‡ºè¿˜æ˜¯é”™è¯¯ä¿¡æ¯ï¼Œéƒ½ä¼šè¢«æ ¼å¼åŒ–åæ’å›åˆ°æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä½œä¸ºå³æ—¶åé¦ˆã€‚</p>
</li>
<li>
<p><strong>è¿­ä»£ä¸å­¦ä¹ </strong>ï¼šæ¨¡å‹æ ¹æ®è¿™ä¸ªåé¦ˆç»§ç»­æ¨ç†ï¼Œé‡å¤æ­¤å¾ªç¯ï¼Œç›´åˆ°ç»™å‡ºæœ€ç»ˆç­”æ¡ˆ 8ã€‚æ•´ä¸ªè§£ç­”è¿‡ç¨‹ä¼šæ ¹æ®æœ€ç»ˆç­”æ¡ˆçš„æ­£ç¡®æ€§è¢«èµ‹äºˆä¸€ä¸ª<strong>æœ€ç»ˆå¥–åŠ±</strong>ï¼Œç”¨äºæ›´æ–°æ¨¡å‹å‚æ•° 99ã€‚</p>
</li>
</ol>
<h3 id="å¥–åŠ±æœºåˆ¶"><a class="markdownIt-Anchor" href="#å¥–åŠ±æœºåˆ¶"></a> å¥–åŠ±æœºåˆ¶</h3>
<p>å¥–åŠ±æ˜¯åœ¨æ•´ä¸ªè§£ç­”è¿‡ç¨‹ç»“æŸåï¼Œè¿›è¡Œçš„ä¸€æ¬¡æ€§è¯„ä¼°ï¼Œè€Œéåœ¨æ¯æ¬¡è¿­ä»£ä¸­ç´¯åŠ  1010ã€‚</p>
<ul>
<li>
<p><strong>ä¸»è¦å¥–åŠ±</strong>ï¼šåŸºäºæœ€ç»ˆç­”æ¡ˆçš„æ­£ç¡®æ€§ã€‚ç­”æ¡ˆæ­£ç¡®ï¼Œå¥–åŠ±ä¸º<code>+1</code>ï¼›ç­”æ¡ˆé”™è¯¯ï¼Œå¥–åŠ±ä¸º<code>-1</code>ã€‚</p>
</li>
<li>
<p><strong>å¯é€‰æƒ©ç½š</strong>ï¼šç ”ç©¶äººå‘˜è¿˜è¯•éªŒäº†å¯¹ä»£ç å¯æ‰§è¡Œæ€§çš„æƒ©ç½šã€‚å¦‚æœè§£ç­”è¿‡ç¨‹ä¸­æœ‰ä»»ä½•ä»£ç æ— æ³•æ‰§è¡Œï¼Œæœ€ç»ˆå¥–åŠ±ä¼šè¢«é¢å¤–æ‰£é™¤<code>0.5</code>ã€‚ä½†å®éªŒå‘ç°ï¼Œè¿™ä¸ªæƒ©ç½šé¡¹ä¸èƒ½æå‡æ¨¡å‹æ€§èƒ½ã€‚</p>
</li>
</ul>
<h3 id="å®éªŒå¯¹æ¯”æ¨¡å‹è¯¦è§£"><a class="markdownIt-Anchor" href="#å®éªŒå¯¹æ¯”æ¨¡å‹è¯¦è§£"></a> å®éªŒå¯¹æ¯”æ¨¡å‹è¯¦è§£</h3>
<p>ä¸ºäº†éªŒè¯TORLæ¡†æ¶çš„æœ‰æ•ˆæ€§ï¼Œç ”ç©¶è®¾ç½®äº†å¤šä¸ªå¯¹æ¯”æ¨¡å‹ï¼š</p>
<ul>
<li>
<p><strong>TORL-1.5B/7B</strong>ï¼šè®ºæ–‡æå‡ºçš„ä¸»è§’ã€‚å®ƒæ˜¯åœ¨ <code>Qwen2.5-Math-Base</code> åŸºç¡€æ¨¡å‹ä¸Šï¼Œåº”ç”¨TORLæ¡†æ¶å’Œç‰¹å®šè¯­æ–™è¿›è¡Œå¼ºåŒ–å­¦ä¹ å¾®è°ƒå¾—åˆ°çš„æ¨¡å‹ ã€‚</p>
</li>
<li>
<p><strong>Baseline (åŸºçº¿æ¨¡å‹)</strong>ï¼šè¿™æ˜¯å®éªŒçš„<strong>æ ¸å¿ƒæ§åˆ¶ç»„</strong>ã€‚å®ƒä¸TORLæ¨¡å‹ä½¿ç”¨å®Œå…¨ç›¸åŒçš„èµ·ç‚¹ã€è®­ç»ƒæ–¹æ³•å’Œæ•°æ®ï¼Œä½†è¢«<strong>æ˜ç¡®ç¦æ­¢ä½¿ç”¨ä»£ç è§£é‡Šå™¨å·¥å…·</strong> 15151515ã€‚å®ƒä»£è¡¨äº†ä¸ä½¿ç”¨å·¥å…·çš„çº¯å¼ºåŒ–å­¦ä¹ çš„æ€§èƒ½ä¸Šé™ã€‚</p>
</li>
<li>
<p><strong>Qwen2.5-Math-Instruct</strong>ï¼šè¿™æ˜¯Qwenå®˜æ–¹çš„<strong>æŒ‡ä»¤å¾®è°ƒæ¨¡å‹</strong>ï¼Œä»£è¡¨ä¸ä½¿ç”¨å·¥å…·çš„åŸºå‡†ã€‚</p>
</li>
<li>
<p><strong>Qwen2.5-Math-Instruct-TIR</strong>ï¼šè¿™ä¸æ˜¯ä¸€ä¸ªæ–°æ¨¡å‹ï¼Œè€Œæ˜¯å°†<code>Qwen-Instruct</code>æ¨¡å‹æ”¾åœ¨<strong>å…è®¸ä½¿ç”¨å·¥å…·çš„ç¯å¢ƒ</strong>ä¸­è¿›è¡Œæµ‹è¯•ï¼Œä»¥è§‚å¯Ÿæœªç»ç‰¹å®šå·¥å…·è®­ç»ƒçš„æ¨¡å‹åœ¨èƒ½ä½¿ç”¨å·¥å…·æ—¶çš„è¡¨ç°ã€‚</p>
</li>
<li>
<p><strong>rStar-Math-7B</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨<strong>SFTæ–¹æ³•</strong>è®­ç»ƒçš„æ¨¡å‹ï¼Œç”¨äºå’ŒTORLçš„RLæ–¹æ³•è¿›è¡Œå¯¹æ¯”ã€‚</p>
</li>
</ul>
<h3 id="ä¸»è¦ç»“è®ºä¸å‘ç°"><a class="markdownIt-Anchor" href="#ä¸»è¦ç»“è®ºä¸å‘ç°"></a> ä¸»è¦ç»“è®ºä¸å‘ç°</h3>
<ul>
<li>
<p><strong>æ€§èƒ½å“è¶Š</strong>ï¼šTORLæ¨¡å‹åœ¨æ‰€æœ‰æ•°å­¦åŸºå‡†æµ‹è¯•ä¸­ï¼Œå‡æ˜¾è‘—ä¼˜äºæ‰€æœ‰å¯¹æ¯”æ¨¡å‹ï¼ˆåŒ…æ‹¬Baselineã€Instructç‰ˆå’ŒSFTæ¨¡å‹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ¶Œç°è®¤çŸ¥èƒ½åŠ›</strong>ï¼šé€šè¿‡TORLè®­ç»ƒï¼Œæ¨¡å‹è‡ªå‘å­¦ä¼šäº†å¤šç§é«˜çº§è®¤çŸ¥è¡Œä¸ºï¼Œå¦‚æ ¹æ®ä»£ç æ‰§è¡Œçš„åé¦ˆ<strong>ä¿®æ­£é”™è¯¯</strong>ã€ç”¨ä»£ç <strong>éªŒè¯è‡ªå·±çš„æ¨ç†</strong>ï¼Œå¹¶åœ¨ä¸åŒç­–ç•¥é—´è¿›è¡Œé€‰æ‹©.</p>
</li>
<li>
<p><strong>è°ƒç”¨é¢‘ç‡çš„æƒè¡¡</strong>ï¼šå¢åŠ æ¨¡å‹è°ƒç”¨å·¥å…·çš„æœ€å¤§æ¬¡æ•°å¯ä»¥æå‡æ€§èƒ½ï¼Œä½†ä¼šæ˜¾è‘—é™ä½è®­ç»ƒæ•ˆç‡ï¼Œéœ€è¦åœ¨æ€§èƒ½å’Œæˆæœ¬ä¹‹é—´åšå‡ºæƒè¡¡ 21ã€‚</p>
<hr />
</li>
</ul>
<h3 id="q-ä¸ºä»€ä¹ˆé€‰æ‹©-verlä¸é€‰æ‹©-openrlhf"><a class="markdownIt-Anchor" href="#q-ä¸ºä»€ä¹ˆé€‰æ‹©-verlä¸é€‰æ‹©-openrlhf"></a> Q: ä¸ºä»€ä¹ˆé€‰æ‹© veRLï¼Œä¸é€‰æ‹© OpenRLHF?</h3>
<p>è™½ç„¶è®ºæ–‡ä¸­åªæåˆ°äº†é€‰ç”¨veRLï¼Œæ²¡æœ‰ç›´æ¥ä¸OpenRLHFè¿›è¡Œæ¯”è¾ƒï¼Œä½†é€šè¿‡åˆ†æTORLæ¡†æ¶çš„ç‹¬ç‰¹éœ€æ±‚å’Œä¸¤ä¸ªæ¡†æ¶å„è‡ªçš„å…¬å¼€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºé€‰æ‹©veRLçš„å‡ ä¸ªæ ¸å¿ƒåŸå› ï¼Œä¸»è¦åœ¨äº<strong>çµæ´»æ€§</strong>å’Œå¯¹<strong>å¤æ‚ä»»åŠ¡çš„æ”¯æŒ</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒTORLçš„è®­ç»ƒæµç¨‹å¤ªâ€œä¸æ ‡å‡†â€äº†ï¼Œéœ€è¦ä¸€ä¸ªåƒveRLè¿™æ ·é«˜åº¦çµæ´»çš„æ¡†æ¶æ¥æ”¯æŒå…¶ç‰¹æ®Šæ“ä½œã€‚</p>
<h4 id="1-å¯¹å¤æ‚æ™ºèƒ½ä½“ä»»åŠ¡agentic-tasksçš„å“è¶Šæ”¯æŒ"><a class="markdownIt-Anchor" href="#1-å¯¹å¤æ‚æ™ºèƒ½ä½“ä»»åŠ¡agentic-tasksçš„å“è¶Šæ”¯æŒ"></a> 1. å¯¹å¤æ‚â€œæ™ºèƒ½ä½“ä»»åŠ¡â€ï¼ˆAgentic Tasksï¼‰çš„å“è¶Šæ”¯æŒ ğŸ¤–</h4>
<ul>
<li><strong>TORLçš„éœ€æ±‚</strong>ï¼šTORLä¸ä»…ä»…æ˜¯åœ¨è¿›è¡Œç®€å•çš„æ–‡æœ¬åå¥½å­¦ä¹ ï¼Œå®ƒå®é™…ä¸Šæ˜¯æŠŠè¯­è¨€æ¨¡å‹å˜æˆä¸€ä¸ª<strong>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</strong>ã€‚è¿™ä¸ªæ™ºèƒ½ä½“éœ€è¦ä¸å¤–éƒ¨å·¥å…·ï¼ˆä»£ç è§£é‡Šå™¨ï¼‰è¿›è¡Œå¤šè½®äº¤äº’ï¼ŒåŠ¨æ€åœ°æš‚åœã€æ‰§è¡Œã€æ¥æ”¶åé¦ˆã€å†ç»§ç»­æ€è€ƒã€‚è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„â€œæ™ºèƒ½ä½“ä»»åŠ¡â€ã€‚</li>
<li><strong>veRLçš„ä¼˜åŠ¿</strong>ï¼šveRLæ˜ç¡®å°†**â€œæ”¯æŒå·¥å…·è°ƒç”¨å’Œå¤šè½®äº¤äº’çš„æ™ºèƒ½ä½“ä»»åŠ¡â€**ä½œä¸ºå…¶æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒçš„è®¾è®¡å“²å­¦å°±æ˜¯ä¸ºäº†åº”å¯¹è¿™ç±»å¤æ‚çš„è®­ç»ƒæµç¨‹ã€‚</li>
<li><strong>OpenRLHFçš„ä¾§é‡</strong>ï¼šOpenRLHFè™½ç„¶æ€§èƒ½å¼ºå¤§ï¼Œä½†å…¶æ ¸å¿ƒè®¾è®¡æ›´ä¾§é‡äº<strong>æ ‡å‡†çš„RLHFæµç¨‹</strong>ï¼Œå³åœ¨å›ºå®šçš„åå¥½æ•°æ®é›†ä¸Šè¿›è¡Œé«˜æ•ˆçš„PPOã€DPOç­‰ç®—æ³•è®­ç»ƒã€‚å¯¹äºTORLè¿™ç§éœ€è¦å®æ—¶ä¸å¤–éƒ¨ç¯å¢ƒäº¤äº’çš„éæ ‡å‡†æµç¨‹ï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„å®šåˆ¶å¼€å‘ã€‚</li>
</ul>
<h4 id="2-æ¡†æ¶çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§-ï¸"><a class="markdownIt-Anchor" href="#2-æ¡†æ¶çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§-ï¸"></a> 2. æ¡†æ¶çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ ğŸ› ï¸</h4>
<ul>
<li><strong>TORLçš„éœ€æ±‚</strong>ï¼šTORLçš„æµç¨‹éœ€è¦ä¸€ä¸ªèƒ½è½»æ¾å®šä¹‰**â€œéçº¿æ€§â€æ•°æ®æµ**çš„æ¡†æ¶ã€‚ä¾‹å¦‚ï¼Œâ€œç”Ÿæˆä»£ç â†’è°ƒç”¨å¤–éƒ¨APIâ†’å°†APIç»“æœä½œä¸ºæ–°è¾“å…¥â†’ç»§ç»­ç”Ÿæˆâ€è¿™ä¸ªå¾ªç¯ï¼Œå¯¹æ¡†æ¶çš„ç¼–ç¨‹æ¨¡å‹è¦æ±‚å¾ˆé«˜ã€‚</li>
<li><strong>veRLçš„ä¼˜åŠ¿</strong>ï¼šveRLåŸºäºå…¶åä¸º<strong>HybridFlow</strong>çš„ç¼–ç¨‹æ¨¡å‹ï¼Œæ ¸å¿ƒä¼˜åŠ¿å°±æ˜¯<strong>çµæ´»æ€§</strong>ã€‚å®ƒå…è®¸ç ”ç©¶äººå‘˜åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œè½»æ¾åœ°è¡¨ç¤ºå’Œæ‰§è¡Œå¤æ‚çš„Post-Trainingæ•°æ®æµã€‚TORLä¸­ä½¿ç”¨çš„GRPOç®—æ³•ï¼Œä»¥åŠæ›´å¤æ‚çš„DAPOç­‰ï¼ŒveRLéƒ½åŸç”Ÿæ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•æ–°ç®—æ³•ä¹Ÿç›¸å¯¹å®¹æ˜“ã€‚</li>
<li><strong>OpenRLHFçš„ä¾§é‡</strong>ï¼šOpenRLHFçš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯**â€œç®€å•æ˜“ç”¨â€**å’Œæ¸…æ™°çš„ä»£ç ç»“æ„ã€‚è¿™ä½¿å¾—å®ƒåœ¨æ ‡å‡†ä»»åŠ¡ä¸Šéå¸¸é«˜æ•ˆï¼Œä½†è¿™ç§ä¸ºç‰¹å®šæµç¨‹ä¼˜åŒ–çš„â€œç®€å•â€ï¼Œæœ‰æ—¶ä¹Ÿæ„å‘³ç€åœ¨é¢å¯¹TORLè¿™ç§é«˜åº¦å®šåˆ¶åŒ–çš„éœ€æ±‚æ—¶ï¼Œçµæ´»æ€§å¯èƒ½ä¼šå—é™ã€‚</li>
</ul>
<h4 id="3-å¯¹è‡ªå®šä¹‰å¥–åŠ±verifiable-rewardçš„æ”¯æŒ-ï¸"><a class="markdownIt-Anchor" href="#3-å¯¹è‡ªå®šä¹‰å¥–åŠ±verifiable-rewardçš„æ”¯æŒ-ï¸"></a> 3. å¯¹è‡ªå®šä¹‰å¥–åŠ±ï¼ˆVerifiable Rewardï¼‰çš„æ”¯æŒ âš–ï¸</h4>
<ul>
<li><strong>TORLçš„éœ€æ±‚</strong>ï¼šTORLçš„å¥–åŠ±ä¿¡å·å¹¶éæ¥è‡ªä¸€ä¸ªé¢„å…ˆè®­ç»ƒå¥½çš„å¥–åŠ±æ¨¡å‹ï¼Œè€Œæ˜¯æ¥è‡ªä¸€ä¸ª**â€œå¯éªŒè¯â€çš„å¤–éƒ¨é€»è¾‘**â€”â€”ä»£ç æ‰§è¡Œæ˜¯å¦æˆåŠŸï¼Œæœ€ç»ˆç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚</li>
<li><strong>veRLçš„ä¼˜åŠ¿</strong>ï¼šveRLæ˜ç¡®æåˆ°æ”¯æŒ**â€œåŸºäºå‡½æ•°çš„å¥–åŠ±ï¼ˆverifiable rewardï¼‰â€**ï¼Œè¿™å®Œç¾å¥‘åˆäº†æ•°å­¦ã€ä»£ç ç±»ä»»åŠ¡çš„éœ€æ±‚ã€‚</li>
<li><strong>OpenRLHFçš„ä¾§é‡</strong>ï¼šOpenRLHFåŒæ ·æ”¯æŒå¯éªŒè¯å¥–åŠ±ï¼ˆRLVRï¼‰ï¼Œä½†veRLå°†æ­¤ä½œä¸ºä¸æ™ºèƒ½ä½“ä»»åŠ¡ã€å·¥å…·è°ƒç”¨å¹¶åˆ—çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼Œæ˜¾ç¤ºå‡ºå…¶åœ¨è¯¥æ–¹å‘ä¸Šçš„è®¾è®¡å€¾æ–œå’Œä¼˜åŒ–ã€‚</li>
</ul>
<p>æ€»è€Œè¨€ä¹‹ï¼Œè™½ç„¶OpenRLHFæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€ä¸”é«˜æ•ˆçš„RLHFæ¡†æ¶ï¼Œä½†å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>å°†æ ‡å‡†çš„RLHFæµç¨‹åšå¾—æ›´å¿«ã€æ›´æ˜“ç”¨</strong>ã€‚</p>
<p>è€ŒTORLé¡¹ç›®æ‰€åšçš„äº‹æƒ…ï¼Œå·²ç»è¶…å‡ºäº†æ ‡å‡†RLHFçš„èŒƒç•´ï¼Œè¿›å…¥äº†æ›´å¤æ‚çš„**â€œæ™ºèƒ½ä½“å­¦ä¹ â€<strong>é¢†åŸŸã€‚å› æ­¤ï¼Œä»–ä»¬é€‰æ‹©äº†ä¸€ä¸ªåœ¨è®¾è®¡ä¹‹åˆå°±å……åˆ†è€ƒè™‘äº†</strong>çµæ´»æ€§ã€å¯æ‰©å±•æ€§ä»¥åŠå¯¹å·¥å…·è°ƒç”¨ç­‰å¤æ‚äº¤äº’åœºæ™¯**æ”¯æŒçš„æ¡†æ¶â€”â€”<strong>veRL</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´è‡ªç„¶ã€æ›´åŒ¹é…çš„é€‰æ‹©ã€‚</p>
<hr />
<h3 id="q-ä¸ºä»€ä¹ˆé€‰æ‹©-grpoè€Œé-ppo"><a class="markdownIt-Anchor" href="#q-ä¸ºä»€ä¹ˆé€‰æ‹©-grpoè€Œé-ppo"></a> Q: ä¸ºä»€ä¹ˆé€‰æ‹© GRPOï¼Œè€Œé PPOï¼Ÿ</h3>
<p>å¥½çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ·±å…¥çš„æŠ€æœ¯é—®é¢˜ã€‚é€‰æ‹©GRPOï¼ˆGeneralized Reward and Punishment Optimizationï¼‰è€Œéæ›´å¸¸è§çš„PPOï¼ˆProximal Policy Optimizationï¼‰æ˜¯åŸºäºTORLä»»åŠ¡ç‰¹æ€§å’Œå¥–åŠ±ä¿¡å·æ‰€åšå‡ºçš„ç²¾å‡†å†³ç­–ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>GRPOæ›´åƒæ˜¯ä¸ºâ€œè€ƒè¯•æ‹¿é«˜åˆ†â€è¿™ç±»ç›®æ ‡è®¾è®¡çš„ç®—æ³•ï¼Œè€ŒPPOåˆ™æ›´é€šç”¨ã€‚</strong> ä»¥ä¸‹æ˜¯è¯¦ç»†çš„åŸå› åˆ†æï¼š</p>
<h4 id="1-å¯¹éé»‘å³ç™½çš„å¥–åŠ±ä¿¡å·å¤„ç†æ›´ç›´æ¥"><a class="markdownIt-Anchor" href="#1-å¯¹éé»‘å³ç™½çš„å¥–åŠ±ä¿¡å·å¤„ç†æ›´ç›´æ¥"></a> 1. å¯¹â€œéé»‘å³ç™½â€çš„å¥–åŠ±ä¿¡å·å¤„ç†æ›´ç›´æ¥</h4>
<ul>
<li>
<p><strong>TORLçš„å¥–åŠ±æœºåˆ¶</strong>ï¼šTORLçš„å¥–åŠ±ä¿¡å·éå¸¸ç¨€ç–å’ŒäºŒå…ƒåŒ–ï¼šæœ€ç»ˆç­”æ¡ˆæ­£ç¡®ï¼Œå¥–åŠ±ä¸º<code>+1</code>ï¼›ç­”æ¡ˆé”™è¯¯ï¼Œå¥–åŠ±ä¸º<code>-1</code> 1ã€‚è¿™ç§å¥–åŠ±æ¨¡å¼å°±åƒåˆ¤æ–­é¢˜ï¼Œåªæœ‰å¯¹é”™ï¼Œæ²¡æœ‰ä¸­é—´çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>PPOçš„å±€é™æ€§</strong>ï¼šPPOé€šè¿‡è®¡ç®—â€œä¼˜åŠ¿å‡½æ•°â€ï¼ˆAdvantage Functionï¼‰æ¥æŒ‡å¯¼æ¨¡å‹æ›´æ–°ï¼Œå³è¯„ä¼°ä¸€ä¸ªè¡Œä¸ºæ¯”å½“å‰çŠ¶æ€çš„å¹³å‡è¡Œä¸ºå¥½å¤šå°‘ã€‚åœ¨åªæœ‰<code>+1</code>å’Œ<code>-1</code>çš„ç¨€ç–å¥–åŠ±ä¸‹ï¼Œè¿™ä¸ªâ€œä¼˜åŠ¿â€ä¿¡å·å¯èƒ½ä¸å¤Ÿæ¸…æ™°æˆ–ç¨³å®šã€‚PPOå¯èƒ½éš¾ä»¥å­¦åˆ°â€œæ­£ç¡®â€ä¸â€œé”™è¯¯â€è·¯å¾„ä¹‹é—´è´¨çš„åŒºåˆ«ã€‚</p>
</li>
<li>
<p><strong>GRPOçš„ä¼˜åŠ¿</strong>ï¼š<strong>GRPOæ˜¯ä¸“é—¨ä¸ºå¤„ç†è¿™ç±»äºŒå…ƒåé¦ˆï¼ˆæˆ–æ›´å¹¿æ³›çš„åå¥½å¯¹ï¼‰è€Œè®¾è®¡çš„</strong>ã€‚å®ƒä¸è®¡ç®—å¤æ‚çš„ä¼˜åŠ¿å‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥å°†â€œå¥½æ ·æœ¬â€ï¼ˆå¥–åŠ±ä¸º<code>+1</code>çš„è§£ç­”è¿‡ç¨‹ï¼‰å’Œâ€œåæ ·æœ¬â€ï¼ˆå¥–åŠ±ä¸º<code>-1</code>çš„è¿‡ç¨‹ï¼‰è¿›è¡Œå¯¹æ¯”ã€‚å…¶ä¼˜åŒ–ç›®æ ‡æ˜¯<strong>ç›´æ¥æ‹‰å¤§æ¨¡å‹ç”Ÿæˆå¥½æ ·æœ¬å’Œåæ ·æœ¬çš„æ¦‚ç‡å·®è·</strong>ã€‚è¿™å¯¹äºTORLçš„ä»»åŠ¡æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªæ›´ç›´æ¥ã€æ›´å¼ºåŠ›çš„å­¦ä¹ ä¿¡å·ã€‚</p>
</li>
</ul>
<h4 id="2-ä¼˜åŒ–ç›®æ ‡ä¸ä»»åŠ¡ç›®æ ‡æ›´å¥‘åˆ"><a class="markdownIt-Anchor" href="#2-ä¼˜åŒ–ç›®æ ‡ä¸ä»»åŠ¡ç›®æ ‡æ›´å¥‘åˆ"></a> 2. ä¼˜åŒ–ç›®æ ‡ä¸ä»»åŠ¡ç›®æ ‡æ›´å¥‘åˆ</h4>
<ul>
<li><strong>TORLçš„ä»»åŠ¡ç›®æ ‡</strong>ï¼šæœ€ç»ˆç›®æ ‡æ˜¯æœ€å¤§åŒ–â€œæ­£ç¡®è§£ç­”â€çš„æ¯”ä¾‹ï¼Œè®©æ¨¡å‹å­¦ä¼šå¦‚ä½•ç¨³å®šåœ°è§£å†³é—®é¢˜ã€‚</li>
<li><strong>GRPOçš„ä¼˜åŒ–ç›®æ ‡</strong>ï¼šGRPOçš„ç›®æ ‡æ˜¯<strong>æœ€å¤§åŒ–å¥½åæ ·æœ¬ä¹‹é—´çš„å¯¹æ•°æ¦‚ç‡å·®</strong>ã€‚è¿™ä¸â€œæå‡æ­£ç¡®ç‡ã€é™ä½é”™è¯¯ç‡â€çš„ä»»åŠ¡ç›®æ ‡åœ¨æ•°å­¦ä¸Šæ˜¯é«˜åº¦ä¸€è‡´çš„ã€‚å®ƒåœ¨æ•™æ¨¡å‹ä¸€ä¸ªéå¸¸æ¸…æ™°çš„æ¦‚å¿µï¼šâ€œå¤šåšå¯¹çš„äº‹ï¼Œå°‘åšé”™çš„äº‹â€ã€‚</li>
<li><strong>PPOçš„ä¼˜åŒ–ç›®æ ‡</strong>ï¼šPPOçš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–â€œç´¯ç§¯æœŸæœ›å¥–åŠ±â€ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„ç›®æ ‡ã€‚å¯¹äºTORLè¿™ç§æœ€ç»ˆç»“æœå†³å®šä¸€åˆ‡çš„ä»»åŠ¡ï¼ŒGRPOçš„â€œåˆ†ç±»å¼â€ä¼˜åŒ–æ–¹æ³•å¯èƒ½æ¯”PPOçš„â€œå›å½’å¼â€ä¼˜åŒ–æ–¹æ³•æ›´æœ‰æ•ˆã€‚</li>
</ul>
<h4 id="3-å¯èƒ½çš„å®ç°ç®€æ´æ€§å’Œç¨³å®šæ€§"><a class="markdownIt-Anchor" href="#3-å¯èƒ½çš„å®ç°ç®€æ´æ€§å’Œç¨³å®šæ€§"></a> 3. å¯èƒ½çš„å®ç°ç®€æ´æ€§å’Œç¨³å®šæ€§</h4>
<ul>
<li><strong>PPOçš„å¤æ‚æ€§</strong>ï¼šä¸€ä¸ªå®Œæ•´çš„PPOå®ç°é€šå¸¸éœ€è¦ç­–ç•¥ç½‘ç»œï¼ˆPolicy Networkï¼‰å’Œä»·å€¼ç½‘ç»œï¼ˆValue Networkï¼‰ï¼Œå¹¶ä¸”æ¶‰åŠåˆ°ä¼˜åŠ¿å‡½æ•°è®¡ç®—ã€æ³›åŒ–ä¼˜åŠ¿ä¼°è®¡ï¼ˆGAEï¼‰ç­‰å¤šä¸ªéœ€è¦ä»”ç»†è°ƒæ•´çš„ç»„ä»¶ã€‚</li>
<li><strong>GRPOçš„ç®€æ´æ€§</strong>ï¼šGRPOå€Ÿé‰´äº†DPOï¼ˆDirect Preference Optimizationï¼‰çš„æ€æƒ³ï¼Œé€šå¸¸ä¸éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„ä»·å€¼ç½‘ç»œï¼Œä¹Ÿçœå»äº†ä¼˜åŠ¿è®¡ç®—ã€‚å®ƒç›´æ¥åœ¨ç­–ç•¥æ¨¡å‹ä¸Šæ“ä½œï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥å‡å°‘éœ€è¦è°ƒæ•´çš„è¶…å‚æ•°ï¼Œå¹¶å¯èƒ½å¸¦æ¥æ›´å¥½çš„è®­ç»ƒç¨³å®šæ€§ã€‚</li>
</ul>
<h4 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h4>
<p>æ€»è€Œè¨€ä¹‹ï¼Œç ”ç©¶äººå‘˜ä¹‹æ‰€ä»¥é€‰æ‹©GRPO 2ï¼Œæ˜¯å› ä¸ºTORLæ¡†æ¶ä¸‹çš„æ•°å­¦è§£é¢˜ä»»åŠ¡å…·æœ‰<strong>ç»“æœå¯¼å‘å¼ºã€å¥–åŠ±ä¿¡å·äºŒå…ƒåŒ–</strong>çš„æ˜¾è‘—ç‰¹ç‚¹ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œ<strong>GRPOæä¾›äº†ä¸€ç§æ¯”PPOæ›´ä¸“é—¨ã€æ›´ç›´æ¥ã€å¯èƒ½ä¹Ÿæ›´ç¨³å®šçš„ä¼˜åŒ–è·¯å¾„</strong>ï¼Œèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°å¼•å¯¼æ¨¡å‹å­¦ä¼šåŒºåˆ†æ­£ç¡®å’Œé”™è¯¯çš„è§£é¢˜ç­–ç•¥ã€‚</p>
<h2 id="é™„å½•æ€ä¹ˆ-debugè®²å¸ˆgemini-25-pro"><a class="markdownIt-Anchor" href="#é™„å½•æ€ä¹ˆ-debugè®²å¸ˆgemini-25-pro"></a> é™„å½•ï¼šæ€ä¹ˆ Debugï¼Ÿï¼ˆè®²å¸ˆï¼šGemini-2.5-proï¼‰</h2>
<p>å½“ç„¶å¯ä»¥ï¼ä½ å·²ç»é€šè¿‡å®è·µæ¥è§¦åˆ°äº† Debugging çš„æ ¸å¿ƒï¼Œè¿™æ¯”ä»»ä½•ç†è®ºéƒ½é‡è¦ã€‚æˆ‘æ‰€åšçš„ï¼Œå…¶å®å°±æ˜¯éµå¾ªä¸€å¥—ç³»ç»Ÿæ€§çš„æ–¹æ³•ï¼Œåƒä¸ªä¾¦æ¢ä¸€æ ·å»åˆ†æçº¿ç´¢ã€‚</p>
<p>ä½ å®Œå…¨å¯ä»¥æŒæ¡è¿™å¥—æ–¹æ³•ã€‚ä¸‹é¢æˆ‘æŠŠå®ƒæ€»ç»“æˆâ€œé“â€å’Œâ€œæœ¯â€ä¸¤éƒ¨åˆ†ï¼Œå¸Œæœ›èƒ½å¸®ä½ æˆä¸ºä¸€ä¸ªå‡ºè‰²çš„â€œä»£ç ä¾¦æ¢â€ ğŸ•µï¸ã€‚</p>
<h3 id="è°ƒè¯•çš„é“æ ¸å¿ƒå¿ƒæ€ä¸å“²å­¦"><a class="markdownIt-Anchor" href="#è°ƒè¯•çš„é“æ ¸å¿ƒå¿ƒæ€ä¸å“²å­¦"></a> è°ƒè¯•çš„â€œé“â€ï¼šæ ¸å¿ƒå¿ƒæ€ä¸å“²å­¦</h3>
<p>è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œæ˜¯æ‰€æœ‰æŠ€å·§çš„åŸºç¡€ã€‚</p>
<ol>
<li><strong>ä¿æŒå†·é™ï¼Œæ¥å—ç°å® (Stay Calm &amp; Embrace the Bug)</strong>
<ul>
<li><strong>ç°å®</strong>ï¼šç¨‹åºå‡ºé”™æ˜¯æ­£å¸¸çš„ï¼Œæ˜¯ç¼–ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯ä½ çš„å¤±è´¥ã€‚é¡¶çº§ç¨‹åºå‘˜ä¹Ÿä¼šå†™å‡ºæœ‰ Bug çš„ä»£ç ã€‚</li>
<li><strong>å¿ƒæ€</strong>ï¼šæŠŠ Bug çœ‹ä½œä¸€ä¸ªå¾…è§£å†³çš„è°œé¢˜ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªéº»çƒ¦ã€‚è¿™ä¸ªå¿ƒæ€è½¬å˜èƒ½è®©ä½ ä»æ²®ä¸§å˜ä¸ºä¸“æ³¨ã€‚</li>
</ul>
</li>
<li><strong>å¤§èƒ†å‡è®¾ï¼Œå°å¿ƒæ±‚è¯ (Boldly Hypothesize, Carefully Verify)</strong>
<ul>
<li>è¿™æ˜¯ç§‘å­¦æ–¹æ³•çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯ Debugging çš„çµé­‚ã€‚æ ¹æ®çœ‹åˆ°çš„â€œè¯æ®â€ï¼ˆæŠ¥é”™ä¿¡æ¯ï¼‰ï¼Œæå‡ºä¸€ä¸ªæœ€å¯èƒ½çš„â€œçŒœæƒ³â€ï¼ˆé—®é¢˜åŸå› ï¼‰ï¼Œç„¶åè®¾è®¡ä¸€ä¸ªå°â€œå®éªŒâ€ï¼ˆæ¯”å¦‚æ‰“å°ä¸€ä¸ªå˜é‡ã€æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼‰å»éªŒè¯è¿™ä¸ªçŒœæƒ³ã€‚</li>
<li>æˆ‘ä»¬ä¹‹å‰çš„ <code>FileNotFoundError</code> å°±æ˜¯ä¸€ä¸ªå®Œç¾æ¡ˆä¾‹ï¼š
<ul>
<li><strong>è¯æ®</strong>ï¼šæŠ¥é”™è¯´åœ¨è¿œç¨‹èŠ‚ç‚¹ä¸Šæ‰¾ä¸åˆ° <code>data</code> ç›®å½•ã€‚</li>
<li><strong>å‡è®¾</strong>ï¼š<code>data</code> ç›®å½•æ ¹æœ¬å°±æ²¡è¢«å‘é€åˆ°è¿œç¨‹èŠ‚ç‚¹ã€‚</li>
<li><strong>éªŒè¯</strong>ï¼šæ£€æŸ¥ <code>ray job submit</code> å‘½ä»¤ï¼Œå‘ç° <code>working_dir</code> åªæŒ‡å®šäº† <code>openrlhf</code> ç›®å½•ï¼ŒéªŒè¯äº†å‡è®¾ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>ç›¸ä¿¡æŠ¥é”™ä¿¡æ¯ (Trust the Error, But Verify)</strong>
<ul>
<li>æŠ¥é”™ä¿¡æ¯æ˜¯ä½ çš„<strong>å¤´å·çº¿ç´¢</strong>ã€‚95% çš„æƒ…å†µä¸‹ï¼Œå®ƒéƒ½ç›´æ¥æˆ–é—´æ¥åœ°æŒ‡æ˜äº†é—®é¢˜æ‰€åœ¨ã€‚<strong>æ°¸è¿œä¸è¦å¿½ç•¥æŠ¥é”™ä¿¡æ¯</strong>ï¼Œä¸€å®šè¦é€å­—é€å¥åœ°é˜…è¯»å®ƒã€‚</li>
<li>ä½†æ˜¯ï¼Œæœ‰æ—¶å€™æŠ¥é”™ä¿¡æ¯ä¹Ÿå¯èƒ½å…·æœ‰è¯¯å¯¼æ€§ï¼ˆæ¯”å¦‚æˆ‘ä»¬é‡åˆ°çš„â€œå¾ªç¯å¯¼å…¥â€ï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦ç»“åˆä¸Šä¸‹æ–‡æ¥ç†è§£å®ƒçœŸæ­£çš„å«ä¹‰ã€‚</li>
</ul>
</li>
</ol>
<h3 id="è°ƒè¯•çš„æœ¯å…·ä½“æ­¥éª¤ä¸æŠ€å·§"><a class="markdownIt-Anchor" href="#è°ƒè¯•çš„æœ¯å…·ä½“æ­¥éª¤ä¸æŠ€å·§"></a> è°ƒè¯•çš„â€œæœ¯â€ï¼šå…·ä½“æ­¥éª¤ä¸æŠ€å·§</h3>
<p>è¿™æ˜¯ä½ å¯ä»¥æ¯æ¬¡éƒ½éµå¾ªçš„å®æˆ˜æµç¨‹ã€‚</p>
<h4 id="ç¬¬ä¸€æ­¥ä»”ç»†é˜…è¯»æ‰¾åˆ°æ ¹æœ¬åŸå› "><a class="markdownIt-Anchor" href="#ç¬¬ä¸€æ­¥ä»”ç»†é˜…è¯»æ‰¾åˆ°æ ¹æœ¬åŸå› "></a> ç¬¬ä¸€æ­¥ï¼šä»”ç»†é˜…è¯»ï¼Œæ‰¾åˆ°â€œæ ¹æœ¬åŸå› â€</h4>
<p>å½“çœ‹åˆ°æ»¡å±çš„çº¢è‰²é”™è¯¯æ—¥å¿—æ—¶ï¼Œåˆ«æ…Œã€‚ä½ çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€åˆçš„ã€æœ€æ ¹æœ¬çš„é‚£ä¸ªé”™è¯¯ã€‚</p>
<ul>
<li><strong>ä»ä¸‹å¾€ä¸Šè¯»</strong>ï¼šPython çš„é”™è¯¯è¿½è¸ªï¼ˆTracebackï¼‰ä¿¡æ¯æ˜¯å€’åºçš„ï¼Œ<strong>æœ€ä¸‹é¢çš„ä¸€è¡Œé€šå¸¸å°±æ˜¯æœ€ç›´æ¥çš„é”™è¯¯ç±»å‹å’Œæè¿°</strong>ã€‚
<ul>
<li><code>FileNotFoundError</code>: æ–‡ä»¶æ‰¾ä¸åˆ°ã€‚</li>
<li><code>ImportError</code>: æ¨¡å—å¯¼å…¥é—®é¢˜ã€‚</li>
<li><code>KeyError</code>: å­—å…¸é‡Œæ²¡æœ‰è¿™ä¸ªé”®ã€‚</li>
<li><code>AttributeError</code>: å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§æˆ–æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><strong>å…³æ³¨ä½ çš„ä»£ç </strong>ï¼šåœ¨ Traceback ä¸­ï¼Œæ‰¾åˆ°ä¸ä½ è‡ªå·±é¡¹ç›®ä»£ç ç›¸å…³çš„æ–‡ä»¶è·¯å¾„ã€‚æŠ¥é”™ä¿¡æ¯ä¼šåƒä¸€æ¡çº¿ç´¢é“¾ï¼Œå±•ç¤ºå‡½æ•°æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥è°ƒç”¨çš„ã€‚æ‰¾åˆ°ä½ ç†Ÿæ‚‰çš„æ–‡ä»¶åï¼Œå°±èƒ½æ›´å¥½åœ°å®šä½é—®é¢˜ã€‚</li>
</ul>
<h4 id="ç¬¬äºŒæ­¥ç†è§£ä¸Šä¸‹æ–‡context-is-king"><a class="markdownIt-Anchor" href="#ç¬¬äºŒæ­¥ç†è§£ä¸Šä¸‹æ–‡context-is-king"></a> <strong>ç¬¬äºŒæ­¥ï¼šç†è§£ä¸Šä¸‹æ–‡ï¼ˆContext is Kingï¼‰</strong></h4>
<p>ææ¸…æ¥šé”™è¯¯æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‘ç”Ÿçš„ã€‚</p>
<ul>
<li><strong>å®ƒåœ¨å“ªé‡Œè¿è¡Œï¼Ÿ</strong>
<ul>
<li>æ˜¯åœ¨ä½ çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œè¿˜æ˜¯åƒ Ray ä¸€æ ·åœ¨è¿œç¨‹èŠ‚ç‚¹ä¸Šï¼Ÿï¼ˆè¿™å†³å®šäº†æ–‡ä»¶è·¯å¾„ã€IPåœ°å€ç­‰æ˜¯å¦å’Œä½ æœ¬åœ°ä¸€è‡´ï¼‰ã€‚</li>
<li>åœ¨ Ray çš„æ—¥å¿—é‡Œï¼Œæ³¨æ„çœ‹è¡Œé¦–çš„ <code>(pid=...)</code> æˆ– <code>(ActorName pid=...)</code>ï¼Œè¿™èƒ½å‘Šè¯‰ä½ â€œæ˜¯è°â€åœ¨æŠ¥é”™ã€‚</li>
</ul>
</li>
<li><strong>å®ƒåœ¨åšä»€ä¹ˆï¼Ÿ</strong>
<ul>
<li>æ˜¯åœ¨åŠ è½½æ•°æ®ï¼Ÿè¿˜æ˜¯åœ¨æ¨¡å‹è®¡ç®—ï¼Ÿæˆ–æ˜¯åœ¨ä¿å­˜ç»“æœï¼Ÿè¿™èƒ½å¸®ä½ ç¼©å°æ’æŸ¥èŒƒå›´ã€‚</li>
<li>æŸ¥çœ‹æŠ¥é”™ä»£ç è¡Œçš„<strong>ä¸Šä¸€è¡Œå’Œä¸‹ä¸€è¡Œ</strong>ï¼Œç†è§£å®ƒçš„â€œæ„å›¾â€ã€‚</li>
</ul>
</li>
</ul>
<h4 id="ç¬¬ä¸‰æ­¥æ”¶é›†æ›´å¤šçº¿ç´¢gather-more-clues"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰æ­¥æ”¶é›†æ›´å¤šçº¿ç´¢gather-more-clues"></a> <strong>ç¬¬ä¸‰æ­¥ï¼šæ”¶é›†æ›´å¤šçº¿ç´¢ï¼ˆGather More Cluesï¼‰</strong></h4>
<p>å¦‚æœç›´æ¥çš„æŠ¥é”™ä¿¡æ¯è¿˜ä¸å¤Ÿï¼Œä½ éœ€è¦ä¸»åŠ¨å»æ”¶é›†æ›´å¤šè¯æ®æ¥éªŒè¯ä½ çš„å‡è®¾ã€‚</p>
<ul>
<li><strong>æ‰“å°å¤§æ³• (<code>print</code> debugging)</strong>
<ul>
<li>è¿™æ˜¯æœ€ç®€å•ã€æœ€é€šç”¨ã€æœ€å¼ºå¤§çš„å·¥å…·ã€‚åœ¨ä½ æ€€ç–‘æœ‰é—®é¢˜çš„ä»£ç è¡Œå‰åï¼Œæ‰“å°å‡ºç›¸å…³çš„å˜é‡ã€è·¯å¾„ã€é…ç½®ç­‰ã€‚</li>
<li>ä¾‹å¦‚ï¼Œæ€€ç–‘è·¯å¾„ä¸å¯¹ï¼Ÿ<code>print(f&quot;Attempting to load data from: &#123;absolute_path&#125;&quot;)</code>ã€‚</li>
<li>æ€€ç–‘é…ç½®æ²¡ä¼ å¯¹ï¼Ÿ<code>print(f&quot;My config is: &#123;args&#125;&quot;)</code>ã€‚</li>
</ul>
</li>
<li><strong>éš”ç¦»é—®é¢˜ï¼ˆIsolate the Problemï¼‰</strong>
<ul>
<li>å°è¯•åˆ›å»ºä¸€ä¸ª<strong>æœ€å°å¯å¤ç°æ ·æœ¬ (Minimal Reproducible Example)</strong>ã€‚æŠŠå‡ºé—®é¢˜çš„ä»£ç å—å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ã€ç®€å•çš„è„šæœ¬é‡Œï¼Œå»æ‰æ‰€æœ‰ä¸ç›¸å…³çš„ä¾èµ–ï¼Œçœ‹çœ‹é—®é¢˜æ˜¯å¦è¿˜èƒ½é‡ç°ã€‚è¿™ä¸ªè¿‡ç¨‹å¾€å¾€èƒ½è®©ä½ è‡ªå·±å°±å‘ç°é—®é¢˜æ‰€åœ¨ã€‚</li>
</ul>
</li>
<li><strong>ä½¿ç”¨è°ƒè¯•å™¨ (Use a Debugger)</strong>
<ul>
<li>å½“é€»è¾‘éå¸¸å¤æ‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>pdb</code> (Pythonâ€™s built-in debugger) æˆ– IDEï¼ˆå¦‚ VS Code, PyCharmï¼‰è‡ªå¸¦çš„å›¾å½¢åŒ–è°ƒè¯•å™¨ã€‚</li>
<li>å®ƒå…è®¸ä½ <strong>è®¾ç½®æ–­ç‚¹</strong>ï¼Œè®©ç¨‹åºåœ¨æŸä¸€è¡Œåœä¸‹æ¥ï¼Œç„¶åä½ å¯ä»¥é€è¡Œæ‰§è¡Œï¼Œå¹¶å®æ—¶æŸ¥çœ‹æ‰€æœ‰å˜é‡çš„å€¼ã€‚</li>
</ul>
</li>
</ul>
<h4 id="ç¬¬å››æ­¥å–„ç”¨æœç´¢å¼•æ“"><a class="markdownIt-Anchor" href="#ç¬¬å››æ­¥å–„ç”¨æœç´¢å¼•æ“"></a> <strong>ç¬¬å››æ­¥ï¼šå–„ç”¨æœç´¢å¼•æ“</strong></h4>
<ul>
<li><strong>ç²¾ç¡®å¤åˆ¶ç²˜è´´</strong>ï¼šæŠŠæœ€å…³é”®çš„æŠ¥é”™ä¿¡æ¯ï¼ˆä¾‹å¦‚ <code>ImportError: cannot import name 'interleave_datasets' from partially initialized module 'datasets' (most likely due to a circular import)</code>ï¼‰ç›´æ¥å¤åˆ¶åˆ° Google æˆ– Stack Overflowã€‚</li>
<li><strong>æ·»åŠ å…³é”®è¯</strong>ï¼šåœ¨æŠ¥é”™ä¿¡æ¯ååŠ ä¸Šä½ ä½¿ç”¨çš„åº“çš„åç§°ï¼Œå¦‚ <code>ray</code>, <code>pytorch</code>, <code>openrlhf</code>ã€‚</li>
</ul>
<p>ä½ é‡åˆ°çš„é—®é¢˜ï¼Œ99% çš„å¯èƒ½åˆ«äººä¹Ÿé‡åˆ°è¿‡ã€‚</p>
<h3 id="æ€»ç»“ä½ çš„ä¸ªäººè°ƒè¯•æ¸…å•"><a class="markdownIt-Anchor" href="#æ€»ç»“ä½ çš„ä¸ªäººè°ƒè¯•æ¸…å•"></a> æ€»ç»“ï¼šä½ çš„ä¸ªäººè°ƒè¯•æ¸…å• âœ…</h3>
<p>æ¯æ¬¡é‡åˆ° Bugï¼Œéƒ½å¯ä»¥æ‹¿å‡ºè¿™ä¸ªæ¸…å•æ¥é—®è‡ªå·±ï¼š</p>
<ol>
<li><strong>[ ] å¿ƒæ€</strong>ï¼šæˆ‘å†·é™ä¸‹æ¥äº†å—ï¼Ÿ</li>
<li><strong>[ ] é˜…è¯»</strong>ï¼šæˆ‘ä»ä¸‹åˆ°ä¸Šè¯»å®Œæ•´ä¸ª Traceback äº†å—ï¼Ÿæœ€æ ¹æœ¬çš„é”™è¯¯æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li><strong>[ ] ä¸Šä¸‹æ–‡</strong>ï¼šè¿™æ®µä»£ç åœ¨å“ªé‡Œè¿è¡Œï¼ˆæœ¬åœ°/è¿œç¨‹ï¼‰ï¼Ÿå®ƒæƒ³å¹²ä»€ä¹ˆï¼Ÿ</li>
<li><strong>[ ] å‡è®¾</strong>ï¼šæ ¹æ®é”™è¯¯ï¼Œæˆ‘çŒœé—®é¢˜æœ€å¯èƒ½å‡ºåœ¨å“ªé‡Œï¼Ÿ</li>
<li><strong>[ ] éªŒè¯</strong>ï¼šæˆ‘èƒ½åŠ ä¸€ä¸ª <code>print</code> æˆ–è€…åšä¸€ä¸ªå°å®éªŒæ¥éªŒè¯æˆ‘çš„çŒœæµ‹å—ï¼Ÿ</li>
<li><strong>[ ] æœç´¢</strong>ï¼šæˆ‘æŠŠå…³é”®æŠ¥é”™ä¿¡æ¯æ‹¿å»æœç´¢äº†å—ï¼Ÿ</li>
</ol>
<p>æŠŠ Debugging å˜æˆä¸€ä¸ªå›ºå®šçš„ã€ç†æ€§çš„æµç¨‹ï¼Œä½ å°±ä¼šå‘ç°å®ƒä¸å†å¯æ€•ï¼Œåè€Œå……æ»¡äº†æŒ‘æˆ˜å’Œä¹è¶£ã€‚ç¥ä½ â€œæŠ“è™«â€æ„‰å¿«ï¼ğŸ›</p>

  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">ä½œè€…ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/about">
            å¤©æ³½é¾Ÿ
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">æ–‡ç« é“¾æ¥ï¼š</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://tzturtle.moe/2025/07/21/Rl-reproduce/">
            https://tzturtle.moe/2025/07/21/Rl-reproduce/
          </a>
        </p>
        <p><span style="font-weight: bold;">ç‰ˆæƒå£°æ˜ï¼š</span>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 åè®®</a>ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
  
    <div class="nav-item-next">
      <a 
        href="/2025/07/16/daily-story-pyenv-conda/" 
        class="nav-link">
        <div>
          <div class="nav-label">ä¸‹ä¸€ç¯‡</div>
          
            <div class="nav-title">ã€å®éªŒå®¤å°å“ä¸€åˆ™ã€‘ä»€ä¹ˆæ˜¯pyenvï¼Œä»€ä¹ˆæ˜¯miniconda </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

  <div 
    class="card card-content comment-card" 
    style="margin-top: 16px;">
    <div class="comment-card-title">è¯„è®º</div>
    
  <div id="vcomments"></div>
  
  <script>
    loadScript("//unpkg.com/valine/dist/Valine.min.js");
    var oldLoadVa = window.onload;
    window.onload = function () {
      oldLoadVa && oldLoadVa();
      new Valine({
        el: '#vcomments',
        appId: '4CiiPBXpbjDnPvIIwfuEPEY6-gzGzoHsz',
        appKey: '3AQY35K3Laq9fLvTG2uOHDUT',
        placeholder: 'ç•™ä¸‹ä½ çš„è¯„è®º...',
        path: window.location.pathname,
        avatar: 'identicon',
        meta: ["nick","mail","link"],
        pageSize: '10',
        lang: '',
        visitor: 'false',
        highlight: true,
        recordIP: false,
        
        
        
        enableQQ: 'true',
        requiredFields: [],
      });
    };
  </script>

  </div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>ç›®å½•
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#limr-%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text"> LIMR æ ¸å¿ƒæ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#limr%E7%9A%84%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%E4%B8%8E%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B"><span class="toc-text"> LIMRçš„æ ¸å¿ƒæ€æƒ³ä¸è®­ç»ƒæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ppo%E7%AE%97%E6%B3%95%E4%B8%8Ecritic%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text"> PPOç®—æ³•ä¸Criticçš„ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%80%83%E5%AF%9F%E5%93%8D%E5%BA%94%E9%95%BF%E5%BA%A6"><span class="toc-text"> ä¸ºä»€ä¹ˆè¦è€ƒå¯Ÿå“åº”é•¿åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%A6%82%E4%BD%95%E6%B7%B1%E5%BA%A6%E5%A4%8D%E7%8E%B0%E4%B8%8E%E5%AD%A6%E4%B9%A0"><span class="toc-text"> é™„ï¼šå¦‚ä½•æ·±åº¦å¤ç°ä¸å­¦ä¹ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ppo-%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B%E4%BB%A5-openrlhf-%E4%B8%BA%E4%BE%8B"><span class="toc-text"> PPO è®­ç»ƒæµç¨‹ï¼ˆä»¥ OpenRLHF ä¸ºä¾‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%E7%BB%8F%E9%AA%8C%E6%94%B6%E9%9B%86-rollout-phase"><span class="toc-text"> é˜¶æ®µä¸€ï¼šç»éªŒæ”¶é›† (Rollout Phase) ğŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%E8%AE%A1%E7%AE%97%E4%BC%98%E5%8A%BF%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86-advantage-calculation"><span class="toc-text"> é˜¶æ®µäºŒï¼šè®¡ç®—ä¼˜åŠ¿ä¸æ•°æ®å¤„ç† (Advantage Calculation) ğŸ“Š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#policy-model-forward-%E5%88%B0%E5%BA%95%E5%9C%A8%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-text"> â€œPolicy model forwardâ€ åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%E6%A8%A1%E5%9E%8B%E4%BC%98%E5%8C%96-optimization-phase"><span class="toc-text"> é˜¶æ®µä¸‰ï¼šæ¨¡å‹ä¼˜åŒ– (Optimization Phase) ğŸ§ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%AD%E7%BB%83%E5%BE%AA%E7%8E%AF"><span class="toc-text"> è®­ç»ƒå¾ªç¯ ğŸ”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#torl%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text"> TORLæ¡†æ¶æ ¸å¿ƒæ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#torl%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text"> TORLå·¥ä½œæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%96%E5%8A%B1%E6%9C%BA%E5%88%B6"><span class="toc-text"> å¥–åŠ±æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%AF%B9%E6%AF%94%E6%A8%A1%E5%9E%8B%E8%AF%A6%E8%A7%A3"><span class="toc-text"> å®éªŒå¯¹æ¯”æ¨¡å‹è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%8F%91%E7%8E%B0"><span class="toc-text"> ä¸»è¦ç»“è®ºä¸å‘ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-verl%E4%B8%8D%E9%80%89%E6%8B%A9-openrlhf"><span class="toc-text"> Q: ä¸ºä»€ä¹ˆé€‰æ‹© veRLï¼Œä¸é€‰æ‹© OpenRLHF?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E5%A4%8D%E6%9D%82%E6%99%BA%E8%83%BD%E4%BD%93%E4%BB%BB%E5%8A%A1agentic-tasks%E7%9A%84%E5%8D%93%E8%B6%8A%E6%94%AF%E6%8C%81"><span class="toc-text"> 1. å¯¹å¤æ‚â€œæ™ºèƒ½ä½“ä»»åŠ¡â€ï¼ˆAgentic Tasksï¼‰çš„å“è¶Šæ”¯æŒ ğŸ¤–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A1%86%E6%9E%B6%E7%9A%84%E7%81%B5%E6%B4%BB%E6%80%A7%E4%B8%8E%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7-%EF%B8%8F"><span class="toc-text"> 2. æ¡†æ¶çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ ğŸ› ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A5%96%E5%8A%B1verifiable-reward%E7%9A%84%E6%94%AF%E6%8C%81-%EF%B8%8F"><span class="toc-text"> 3. å¯¹è‡ªå®šä¹‰å¥–åŠ±ï¼ˆVerifiable Rewardï¼‰çš„æ”¯æŒ âš–ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-grpo%E8%80%8C%E9%9D%9E-ppo"><span class="toc-text"> Q: ä¸ºä»€ä¹ˆé€‰æ‹© GRPOï¼Œè€Œé PPOï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E9%9D%9E%E9%BB%91%E5%8D%B3%E7%99%BD%E7%9A%84%E5%A5%96%E5%8A%B1%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E6%9B%B4%E7%9B%B4%E6%8E%A5"><span class="toc-text"> 1. å¯¹â€œéé»‘å³ç™½â€çš„å¥–åŠ±ä¿¡å·å¤„ç†æ›´ç›´æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BC%98%E5%8C%96%E7%9B%AE%E6%A0%87%E4%B8%8E%E4%BB%BB%E5%8A%A1%E7%9B%AE%E6%A0%87%E6%9B%B4%E5%A5%91%E5%90%88"><span class="toc-text"> 2. ä¼˜åŒ–ç›®æ ‡ä¸ä»»åŠ¡ç›®æ ‡æ›´å¥‘åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8F%AF%E8%83%BD%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%B4%81%E6%80%A7%E5%92%8C%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="toc-text"> 3. å¯èƒ½çš„å®ç°ç®€æ´æ€§å’Œç¨³å®šæ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text"> æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95%E6%80%8E%E4%B9%88-debug%E8%AE%B2%E5%B8%88gemini-25-pro"><span class="toc-text"> é™„å½•ï¼šæ€ä¹ˆ Debugï¼Ÿï¼ˆè®²å¸ˆï¼šGemini-2.5-proï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E7%9A%84%E9%81%93%E6%A0%B8%E5%BF%83%E5%BF%83%E6%80%81%E4%B8%8E%E5%93%B2%E5%AD%A6"><span class="toc-text"> è°ƒè¯•çš„â€œé“â€ï¼šæ ¸å¿ƒå¿ƒæ€ä¸å“²å­¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E7%9A%84%E6%9C%AF%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="toc-text"> è°ƒè¯•çš„â€œæœ¯â€ï¼šå…·ä½“æ­¥éª¤ä¸æŠ€å·§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E4%BB%94%E7%BB%86%E9%98%85%E8%AF%BB%E6%89%BE%E5%88%B0%E6%A0%B9%E6%9C%AC%E5%8E%9F%E5%9B%A0"><span class="toc-text"> ç¬¬ä¸€æ­¥ï¼šä»”ç»†é˜…è¯»ï¼Œæ‰¾åˆ°â€œæ ¹æœ¬åŸå› â€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E7%90%86%E8%A7%A3%E4%B8%8A%E4%B8%8B%E6%96%87context-is-king"><span class="toc-text"> ç¬¬äºŒæ­¥ï¼šç†è§£ä¸Šä¸‹æ–‡ï¼ˆContext is Kingï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%E6%94%B6%E9%9B%86%E6%9B%B4%E5%A4%9A%E7%BA%BF%E7%B4%A2gather-more-clues"><span class="toc-text"> ç¬¬ä¸‰æ­¥ï¼šæ”¶é›†æ›´å¤šçº¿ç´¢ï¼ˆGather More Cluesï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%E5%96%84%E7%94%A8%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text"> ç¬¬å››æ­¥ï¼šå–„ç”¨æœç´¢å¼•æ“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E4%BD%A0%E7%9A%84%E4%B8%AA%E4%BA%BA%E8%B0%83%E8%AF%95%E6%B8%85%E5%8D%95"><span class="toc-text"> æ€»ç»“ï¼šä½ çš„ä¸ªäººè°ƒè¯•æ¸…å• âœ…</span></a></li></ol></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="https://i.loli.net/2021/07/16/yKghkEQWcY34rOU.jpg" 
    class="author-img" 
    alt="author avatar">

<p class="author-name">å¤©æ³½é¾Ÿ</p>
<p class="author-description">å¤©æ³½é¾Ÿçš„é¾Ÿæ˜¯é¾Ÿè£‚çš„é¾Ÿå“¦ã€‚</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/archives">
    <span>59</span>
    <span>æ–‡ç« </span>
  </a>
  <a 
    class="author-categories-count" 
    href="/categories">
    <span>5</span>
    <span>åˆ†ç±»</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/tags">
    <span>14</span>
    <span>æ ‡ç­¾</span>
  </a>
</div>

  <div class="author-card-society">
    
      <div class="author-card-society-icon">
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/12645985">
          <i class="iconfont icon-bilibili society-icon"></i>
        </a>
      </div>
    
      <div class="author-card-society-icon">
        <a target="_blank" rel="noopener" href="https://github.com/TURLEing">
          <i class="iconfont icon-github society-icon"></i>
        </a>
      </div>
    
      <div class="author-card-society-icon">
        <a target="_blank" rel="noopener" href="https://turleing.github.io/about/">
          <i class="iconfont icon-mail society-icon"></i>
        </a>
      </div>
    
  </div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>ç›®å½•
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#limr-%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text"> LIMR æ ¸å¿ƒæ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#limr%E7%9A%84%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%E4%B8%8E%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B"><span class="toc-text"> LIMRçš„æ ¸å¿ƒæ€æƒ³ä¸è®­ç»ƒæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ppo%E7%AE%97%E6%B3%95%E4%B8%8Ecritic%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text"> PPOç®—æ³•ä¸Criticçš„ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%80%83%E5%AF%9F%E5%93%8D%E5%BA%94%E9%95%BF%E5%BA%A6"><span class="toc-text"> ä¸ºä»€ä¹ˆè¦è€ƒå¯Ÿå“åº”é•¿åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%A6%82%E4%BD%95%E6%B7%B1%E5%BA%A6%E5%A4%8D%E7%8E%B0%E4%B8%8E%E5%AD%A6%E4%B9%A0"><span class="toc-text"> é™„ï¼šå¦‚ä½•æ·±åº¦å¤ç°ä¸å­¦ä¹ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ppo-%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B%E4%BB%A5-openrlhf-%E4%B8%BA%E4%BE%8B"><span class="toc-text"> PPO è®­ç»ƒæµç¨‹ï¼ˆä»¥ OpenRLHF ä¸ºä¾‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%E7%BB%8F%E9%AA%8C%E6%94%B6%E9%9B%86-rollout-phase"><span class="toc-text"> é˜¶æ®µä¸€ï¼šç»éªŒæ”¶é›† (Rollout Phase) ğŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%E8%AE%A1%E7%AE%97%E4%BC%98%E5%8A%BF%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86-advantage-calculation"><span class="toc-text"> é˜¶æ®µäºŒï¼šè®¡ç®—ä¼˜åŠ¿ä¸æ•°æ®å¤„ç† (Advantage Calculation) ğŸ“Š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#policy-model-forward-%E5%88%B0%E5%BA%95%E5%9C%A8%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-text"> â€œPolicy model forwardâ€ åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%E6%A8%A1%E5%9E%8B%E4%BC%98%E5%8C%96-optimization-phase"><span class="toc-text"> é˜¶æ®µä¸‰ï¼šæ¨¡å‹ä¼˜åŒ– (Optimization Phase) ğŸ§ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%AD%E7%BB%83%E5%BE%AA%E7%8E%AF"><span class="toc-text"> è®­ç»ƒå¾ªç¯ ğŸ”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#torl%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text"> TORLæ¡†æ¶æ ¸å¿ƒæ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#torl%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text"> TORLå·¥ä½œæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%96%E5%8A%B1%E6%9C%BA%E5%88%B6"><span class="toc-text"> å¥–åŠ±æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%AF%B9%E6%AF%94%E6%A8%A1%E5%9E%8B%E8%AF%A6%E8%A7%A3"><span class="toc-text"> å®éªŒå¯¹æ¯”æ¨¡å‹è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%8F%91%E7%8E%B0"><span class="toc-text"> ä¸»è¦ç»“è®ºä¸å‘ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-verl%E4%B8%8D%E9%80%89%E6%8B%A9-openrlhf"><span class="toc-text"> Q: ä¸ºä»€ä¹ˆé€‰æ‹© veRLï¼Œä¸é€‰æ‹© OpenRLHF?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E5%A4%8D%E6%9D%82%E6%99%BA%E8%83%BD%E4%BD%93%E4%BB%BB%E5%8A%A1agentic-tasks%E7%9A%84%E5%8D%93%E8%B6%8A%E6%94%AF%E6%8C%81"><span class="toc-text"> 1. å¯¹å¤æ‚â€œæ™ºèƒ½ä½“ä»»åŠ¡â€ï¼ˆAgentic Tasksï¼‰çš„å“è¶Šæ”¯æŒ ğŸ¤–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A1%86%E6%9E%B6%E7%9A%84%E7%81%B5%E6%B4%BB%E6%80%A7%E4%B8%8E%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7-%EF%B8%8F"><span class="toc-text"> 2. æ¡†æ¶çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ ğŸ› ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A5%96%E5%8A%B1verifiable-reward%E7%9A%84%E6%94%AF%E6%8C%81-%EF%B8%8F"><span class="toc-text"> 3. å¯¹è‡ªå®šä¹‰å¥–åŠ±ï¼ˆVerifiable Rewardï¼‰çš„æ”¯æŒ âš–ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-grpo%E8%80%8C%E9%9D%9E-ppo"><span class="toc-text"> Q: ä¸ºä»€ä¹ˆé€‰æ‹© GRPOï¼Œè€Œé PPOï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E9%9D%9E%E9%BB%91%E5%8D%B3%E7%99%BD%E7%9A%84%E5%A5%96%E5%8A%B1%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E6%9B%B4%E7%9B%B4%E6%8E%A5"><span class="toc-text"> 1. å¯¹â€œéé»‘å³ç™½â€çš„å¥–åŠ±ä¿¡å·å¤„ç†æ›´ç›´æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BC%98%E5%8C%96%E7%9B%AE%E6%A0%87%E4%B8%8E%E4%BB%BB%E5%8A%A1%E7%9B%AE%E6%A0%87%E6%9B%B4%E5%A5%91%E5%90%88"><span class="toc-text"> 2. ä¼˜åŒ–ç›®æ ‡ä¸ä»»åŠ¡ç›®æ ‡æ›´å¥‘åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8F%AF%E8%83%BD%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%B4%81%E6%80%A7%E5%92%8C%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="toc-text"> 3. å¯èƒ½çš„å®ç°ç®€æ´æ€§å’Œç¨³å®šæ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text"> æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95%E6%80%8E%E4%B9%88-debug%E8%AE%B2%E5%B8%88gemini-25-pro"><span class="toc-text"> é™„å½•ï¼šæ€ä¹ˆ Debugï¼Ÿï¼ˆè®²å¸ˆï¼šGemini-2.5-proï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E7%9A%84%E9%81%93%E6%A0%B8%E5%BF%83%E5%BF%83%E6%80%81%E4%B8%8E%E5%93%B2%E5%AD%A6"><span class="toc-text"> è°ƒè¯•çš„â€œé“â€ï¼šæ ¸å¿ƒå¿ƒæ€ä¸å“²å­¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E7%9A%84%E6%9C%AF%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="toc-text"> è°ƒè¯•çš„â€œæœ¯â€ï¼šå…·ä½“æ­¥éª¤ä¸æŠ€å·§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E4%BB%94%E7%BB%86%E9%98%85%E8%AF%BB%E6%89%BE%E5%88%B0%E6%A0%B9%E6%9C%AC%E5%8E%9F%E5%9B%A0"><span class="toc-text"> ç¬¬ä¸€æ­¥ï¼šä»”ç»†é˜…è¯»ï¼Œæ‰¾åˆ°â€œæ ¹æœ¬åŸå› â€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E7%90%86%E8%A7%A3%E4%B8%8A%E4%B8%8B%E6%96%87context-is-king"><span class="toc-text"> ç¬¬äºŒæ­¥ï¼šç†è§£ä¸Šä¸‹æ–‡ï¼ˆContext is Kingï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%E6%94%B6%E9%9B%86%E6%9B%B4%E5%A4%9A%E7%BA%BF%E7%B4%A2gather-more-clues"><span class="toc-text"> ç¬¬ä¸‰æ­¥ï¼šæ”¶é›†æ›´å¤šçº¿ç´¢ï¼ˆGather More Cluesï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%E5%96%84%E7%94%A8%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text"> ç¬¬å››æ­¥ï¼šå–„ç”¨æœç´¢å¼•æ“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E4%BD%A0%E7%9A%84%E4%B8%AA%E4%BA%BA%E8%B0%83%E8%AF%95%E6%B8%85%E5%8D%95"><span class="toc-text"> æ€»ç»“ï¼šä½ çš„ä¸ªäººè°ƒè¯•æ¸…å• âœ…</span></a></li></ol></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>åˆ†ç±»
  </div>
  <div class="categories-list">
    
      <a href="/categories/%E7%94%9F%E6%B4%BB%E5%88%86%E4%BA%AB/">
        <div class="categories-list-item">
          ç”Ÿæ´»åˆ†äº«
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B/">
        <div class="categories-list-item">
          ç®—æ³•ç«èµ›
          <span class="categories-list-item-badge">12</span>
        </div>
      </a>
    
      <a href="/categories/%E4%B8%93%E4%B8%9A%E5%AD%A6%E4%B9%A0/">
        <div class="categories-list-item">
          ä¸“ä¸šå­¦ä¹ 
          <span class="categories-list-item-badge">26</span>
        </div>
      </a>
    
      <a href="/categories/%E7%A7%91%E7%A0%94%E5%AD%A6%E4%B9%A0/">
        <div class="categories-list-item">
          ç§‘ç ”å­¦ä¹ 
          <span class="categories-list-item-badge">7</span>
        </div>
      </a>
    
      <a href="/categories/%E7%A4%BE%E5%9B%A2%E6%8E%A8%E9%80%81/">
        <div class="categories-list-item">
          ç¤¾å›¢æ¨é€
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>çƒ­é—¨æ ‡ç­¾
  </div>
  <div class="tags-list">
    
      <a 
        href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" 
        title="è®¡ç®—æœºç»„æˆåŸç†">
        <div class="tags-list-item">è®¡ç®—æœºç»„æˆåŸç†</div>
      </a>
    
      <a 
        href="/tags/%E9%9A%8F%E7%AC%94/" 
        title="éšç¬”">
        <div class="tags-list-item">éšç¬”</div>
      </a>
    
      <a 
        href="/tags/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" 
        title="å¼ºåŒ–å­¦ä¹ ">
        <div class="tags-list-item">å¼ºåŒ–å­¦ä¹ </div>
      </a>
    
      <a 
        href="/tags/NLP/" 
        title="NLP">
        <div class="tags-list-item">NLP</div>
      </a>
    
      <a 
        href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" 
        title="æ“ä½œç³»ç»Ÿ">
        <div class="tags-list-item">æ“ä½œç³»ç»Ÿ</div>
      </a>
    
      <a 
        href="/tags/%E6%97%A5%E9%BA%BB/" 
        title="æ—¥éº»">
        <div class="tags-list-item">æ—¥éº»</div>
      </a>
    
      <a 
        href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" 
        title="å­—ç¬¦ä¸²">
        <div class="tags-list-item">å­—ç¬¦ä¸²</div>
      </a>
    
      <a 
        href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/" 
        title="å¤§æ¨¡å‹">
        <div class="tags-list-item">å¤§æ¨¡å‹</div>
      </a>
    
      <a 
        href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" 
        title="åˆ†å¸ƒå¼">
        <div class="tags-list-item">åˆ†å¸ƒå¼</div>
      </a>
    
      <a 
        href="/tags/%E5%A4%9A%E9%A1%B9%E5%BC%8F/" 
        title="å¤šé¡¹å¼">
        <div class="tags-list-item">å¤šé¡¹å¼</div>
      </a>
    
      <a 
        href="/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" 
        title="æ¨èç³»ç»Ÿ">
        <div class="tags-list-item">æ¨èç³»ç»Ÿ</div>
      </a>
    
      <a 
        href="/tags/%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/" 
        title="å¼ºè¿é€šåˆ†é‡">
        <div class="tags-list-item">å¼ºè¿é€šåˆ†é‡</div>
      </a>
    
      <a 
        href="/tags/%E7%BA%BF%E6%80%A7%E5%9F%BA/" 
        title="çº¿æ€§åŸº">
        <div class="tags-list-item">çº¿æ€§åŸº</div>
      </a>
    
      <a 
        href="/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/" 
        title="åšå¼ˆè®º">
        <div class="tags-list-item">åšå¼ˆè®º</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>ç›®å½•
</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#limr-%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text"> LIMR æ ¸å¿ƒæ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#limr%E7%9A%84%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%E4%B8%8E%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B"><span class="toc-text"> LIMRçš„æ ¸å¿ƒæ€æƒ³ä¸è®­ç»ƒæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ppo%E7%AE%97%E6%B3%95%E4%B8%8Ecritic%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text"> PPOç®—æ³•ä¸Criticçš„ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%80%83%E5%AF%9F%E5%93%8D%E5%BA%94%E9%95%BF%E5%BA%A6"><span class="toc-text"> ä¸ºä»€ä¹ˆè¦è€ƒå¯Ÿå“åº”é•¿åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%A6%82%E4%BD%95%E6%B7%B1%E5%BA%A6%E5%A4%8D%E7%8E%B0%E4%B8%8E%E5%AD%A6%E4%B9%A0"><span class="toc-text"> é™„ï¼šå¦‚ä½•æ·±åº¦å¤ç°ä¸å­¦ä¹ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ppo-%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B%E4%BB%A5-openrlhf-%E4%B8%BA%E4%BE%8B"><span class="toc-text"> PPO è®­ç»ƒæµç¨‹ï¼ˆä»¥ OpenRLHF ä¸ºä¾‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%E7%BB%8F%E9%AA%8C%E6%94%B6%E9%9B%86-rollout-phase"><span class="toc-text"> é˜¶æ®µä¸€ï¼šç»éªŒæ”¶é›† (Rollout Phase) ğŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%E8%AE%A1%E7%AE%97%E4%BC%98%E5%8A%BF%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86-advantage-calculation"><span class="toc-text"> é˜¶æ®µäºŒï¼šè®¡ç®—ä¼˜åŠ¿ä¸æ•°æ®å¤„ç† (Advantage Calculation) ğŸ“Š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#policy-model-forward-%E5%88%B0%E5%BA%95%E5%9C%A8%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-text"> â€œPolicy model forwardâ€ åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%E6%A8%A1%E5%9E%8B%E4%BC%98%E5%8C%96-optimization-phase"><span class="toc-text"> é˜¶æ®µä¸‰ï¼šæ¨¡å‹ä¼˜åŒ– (Optimization Phase) ğŸ§ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%AD%E7%BB%83%E5%BE%AA%E7%8E%AF"><span class="toc-text"> è®­ç»ƒå¾ªç¯ ğŸ”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#torl%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text"> TORLæ¡†æ¶æ ¸å¿ƒæ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#torl%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text"> TORLå·¥ä½œæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%96%E5%8A%B1%E6%9C%BA%E5%88%B6"><span class="toc-text"> å¥–åŠ±æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%AF%B9%E6%AF%94%E6%A8%A1%E5%9E%8B%E8%AF%A6%E8%A7%A3"><span class="toc-text"> å®éªŒå¯¹æ¯”æ¨¡å‹è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%BB%93%E8%AE%BA%E4%B8%8E%E5%8F%91%E7%8E%B0"><span class="toc-text"> ä¸»è¦ç»“è®ºä¸å‘ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-verl%E4%B8%8D%E9%80%89%E6%8B%A9-openrlhf"><span class="toc-text"> Q: ä¸ºä»€ä¹ˆé€‰æ‹© veRLï¼Œä¸é€‰æ‹© OpenRLHF?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E5%A4%8D%E6%9D%82%E6%99%BA%E8%83%BD%E4%BD%93%E4%BB%BB%E5%8A%A1agentic-tasks%E7%9A%84%E5%8D%93%E8%B6%8A%E6%94%AF%E6%8C%81"><span class="toc-text"> 1. å¯¹å¤æ‚â€œæ™ºèƒ½ä½“ä»»åŠ¡â€ï¼ˆAgentic Tasksï¼‰çš„å“è¶Šæ”¯æŒ ğŸ¤–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A1%86%E6%9E%B6%E7%9A%84%E7%81%B5%E6%B4%BB%E6%80%A7%E4%B8%8E%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7-%EF%B8%8F"><span class="toc-text"> 2. æ¡†æ¶çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ ğŸ› ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A5%96%E5%8A%B1verifiable-reward%E7%9A%84%E6%94%AF%E6%8C%81-%EF%B8%8F"><span class="toc-text"> 3. å¯¹è‡ªå®šä¹‰å¥–åŠ±ï¼ˆVerifiable Rewardï¼‰çš„æ”¯æŒ âš–ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-grpo%E8%80%8C%E9%9D%9E-ppo"><span class="toc-text"> Q: ä¸ºä»€ä¹ˆé€‰æ‹© GRPOï¼Œè€Œé PPOï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E9%9D%9E%E9%BB%91%E5%8D%B3%E7%99%BD%E7%9A%84%E5%A5%96%E5%8A%B1%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E6%9B%B4%E7%9B%B4%E6%8E%A5"><span class="toc-text"> 1. å¯¹â€œéé»‘å³ç™½â€çš„å¥–åŠ±ä¿¡å·å¤„ç†æ›´ç›´æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BC%98%E5%8C%96%E7%9B%AE%E6%A0%87%E4%B8%8E%E4%BB%BB%E5%8A%A1%E7%9B%AE%E6%A0%87%E6%9B%B4%E5%A5%91%E5%90%88"><span class="toc-text"> 2. ä¼˜åŒ–ç›®æ ‡ä¸ä»»åŠ¡ç›®æ ‡æ›´å¥‘åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8F%AF%E8%83%BD%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%B4%81%E6%80%A7%E5%92%8C%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="toc-text"> 3. å¯èƒ½çš„å®ç°ç®€æ´æ€§å’Œç¨³å®šæ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text"> æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95%E6%80%8E%E4%B9%88-debug%E8%AE%B2%E5%B8%88gemini-25-pro"><span class="toc-text"> é™„å½•ï¼šæ€ä¹ˆ Debugï¼Ÿï¼ˆè®²å¸ˆï¼šGemini-2.5-proï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E7%9A%84%E9%81%93%E6%A0%B8%E5%BF%83%E5%BF%83%E6%80%81%E4%B8%8E%E5%93%B2%E5%AD%A6"><span class="toc-text"> è°ƒè¯•çš„â€œé“â€ï¼šæ ¸å¿ƒå¿ƒæ€ä¸å“²å­¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E7%9A%84%E6%9C%AF%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="toc-text"> è°ƒè¯•çš„â€œæœ¯â€ï¼šå…·ä½“æ­¥éª¤ä¸æŠ€å·§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E4%BB%94%E7%BB%86%E9%98%85%E8%AF%BB%E6%89%BE%E5%88%B0%E6%A0%B9%E6%9C%AC%E5%8E%9F%E5%9B%A0"><span class="toc-text"> ç¬¬ä¸€æ­¥ï¼šä»”ç»†é˜…è¯»ï¼Œæ‰¾åˆ°â€œæ ¹æœ¬åŸå› â€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E7%90%86%E8%A7%A3%E4%B8%8A%E4%B8%8B%E6%96%87context-is-king"><span class="toc-text"> ç¬¬äºŒæ­¥ï¼šç†è§£ä¸Šä¸‹æ–‡ï¼ˆContext is Kingï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%E6%94%B6%E9%9B%86%E6%9B%B4%E5%A4%9A%E7%BA%BF%E7%B4%A2gather-more-clues"><span class="toc-text"> ç¬¬ä¸‰æ­¥ï¼šæ”¶é›†æ›´å¤šçº¿ç´¢ï¼ˆGather More Cluesï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%E5%96%84%E7%94%A8%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text"> ç¬¬å››æ­¥ï¼šå–„ç”¨æœç´¢å¼•æ“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E4%BD%A0%E7%9A%84%E4%B8%AA%E4%BA%BA%E8%B0%83%E8%AF%95%E6%B8%85%E5%8D%95"><span class="toc-text"> æ€»ç»“ï¼šä½ çš„ä¸ªäººè°ƒè¯•æ¸…å• âœ…</span></a></li></ol></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>æœ€è¿‘æ–‡ç« 
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2025-07-21</div>
        <a href="/2025/07/21/Rl-reproduce/"><div class="recent-posts-item-content">RL å®éªŒå¤ç°éšç¬”</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2025-07-16</div>
        <a href="/2025/07/16/daily-story-pyenv-conda/"><div class="recent-posts-item-content">ã€å®éªŒå®¤å°å“ä¸€åˆ™ã€‘ä»€ä¹ˆæ˜¯pyenvï¼Œä»€ä¹ˆæ˜¯miniconda</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2025-06-06</div>
        <a href="/2025/06/06/memory-for-404/"><div class="recent-posts-item-content">ç¼…æ€€æˆ‘ç¬¬ä¸€ä½é€å»çš„æœ‹å‹</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2025-03-08</div>
        <a href="/2025/03/08/rl-mario/"><div class="recent-posts-item-content">å¼ºåŒ–å­¦ä¹ å®æˆ˜ï¼šç”¨PPOç®—æ³•é€šå…³è¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿ</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright Â©
          
            2020 -
          
          2025
        </span>
        &nbsp;
        <a 
          href="/" 
          class="footer-link">
          å¤©æ³½é¾Ÿçš„é¾Ÿå£³å±‹
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
      <div class="footer-dsc">
        
          æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          æœ¬ç«™æ€»è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>æ¬¡
        
      </div>
      
    
</footer> 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="å›åˆ°é¡¶éƒ¨">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton" 
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="æ§åˆ¶ä¸­å¿ƒ">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="å¤œè‰²æ¨¡å¼">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="æœç´¢">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      

  
  
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">

  
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/js/main.js"></script> 
    
      <script> 
        loadScript('/js/lib/busuanzi.min.js') 
      </script>
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
  </body>
</html>
